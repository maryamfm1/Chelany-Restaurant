"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[8038],{1209:(te,D,n)=>{n.d(D,{x:()=>e,i:()=>r});var l=n(44489),h=n(19577),U=n(19923),X=n(96124),P=n(5540),K=n(99549),j=n(75326),Y=n(78217),Z=n(66609),$=n(8769),E=n(44349),J=n(18),_=n(87925),q=n(29197),S=n(82312),t=n(35895);const p=(s,i)=>((0,$.isEmpty)(i)?s?.length:s?.filter(a=>(0,t.W)(i).every(o=>{let[v,g]=o;return a?.some(T=>{let{slug:u,values:y}=T;return v===u&&g.some(L=>y.includes(L))})})).length)??0;var c=n(12828);const f=(0,j.I)("div")({name:"Root",class:"rt9ohsb",propsAsIs:!1}),m=(0,j.I)("div")({name:"Section",class:"sod0gif",propsAsIs:!1}),O=(0,j.I)("div")({name:"SortOptionSelectContainer",class:"s3norky",propsAsIs:!1}),W=(0,j.I)("h2")({name:"MainSectionHeading",class:"mzsneov",propsAsIs:!1}),N=(0,j.I)("h3")({name:"SubSectionHeading",class:"sio936p",propsAsIs:!1}),A=(0,j.I)("div")({name:"FooterWrapper",class:"fe3n981",propsAsIs:!1}),x=(0,j.I)("div")({name:"FooterButtonContainer",class:"f1smex7e",propsAsIs:!1}),b=()=>Y.P.div,R=(0,j.I)(b())({name:"ClearFiltersButtonContainer",class:"c19eyyrl",propsAsIs:!0}),d=()=>{const s=(0,h.c)(3),i=(0,E.useRef)(!0);let a;s[0]===Symbol.for("react.memo_cache_sentinel")?(a=()=>i.current,s[0]=a):a=s[0];const o=a;let v,g;return s[1]===Symbol.for("react.memo_cache_sentinel")?(v=()=>()=>void(i.current=!1),g=[],s[1]=v,s[2]=g):(v=s[1],g=s[2]),(0,E.useEffect)(v,g),o},r=s=>Object.entries(s).map(i=>{let[a,o]=i;return{section_slug:a,values:o}}),e=s=>{let{trackId:i,initialActiveFiltersBySection:a,initialActiveSortOption:o,filters:v,venueFilters:g,filterCount:T,show:u,sortOptions:y,sortingSectionSlug:L,onClose:k,onSubmit:w}=s;const F=(0,_.tz)(),C=(0,S.yl)(),[I,H]=(0,E.useState)(o),[M,V]=(0,E.useState)({}),z=d();(0,E.useEffect)(()=>{a&&V(a)},[a]);const G=!(0,$.isEqual)(M,a),ie=g&&M&&p(g,M),se=I!==o,re=G||se,ae=(0,E.useRef)({changedFilters:[],trackId:i});ae.current={trackId:i,changedFilters:[...r(M),...I!=="recommended"?[{section_slug:L,values:[I]}]:[]]};const ce=(0,E.useMemo)(()=>u?{view:"filters",payload:{filters:ae.current.changedFilters,page:ae.current.trackId}}:void 0,[u]);(0,S.My)(ce);const oe=(0,E.useCallback)(()=>{k(),setTimeout(()=>{z()&&(H(o),V(a))},500)},[a,o,z,k]),de=(0,E.useCallback)(()=>{H("recommended"),V({}),C({type:"clickClearFiltersButton"})},[C,V]),ue=(0,E.useCallback)(B=>{const ne=B.target.value;H(ne),C({type:"clickSingleFilterItem",payload:{section_slug:L,selected:!0,value_slug:ne}})},[L,C]),ee=(0,E.useCallback)(()=>{k(),H(I),w(M,I),re&&C({type:"clickApplyFiltersButton"})},[k,I,w,M,re,C]);return(0,l.jsxs)(X.f,{open:u,sizeConfig:{desktop:{type:"centered",maxHeight:(0,P.a8)(800),maxWidth:(0,P.a8)(500),width:"100%"},mobile:{type:"bottomSheet"}},onDismiss:oe,children:[(0,l.jsx)(Z.N,{initial:!1,children:(!(0,$.isEmpty)(M)||I!=="recommended")&&(0,l.jsx)(R,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{type:"spring",duration:.25,bounce:0},children:(0,l.jsx)(K.QW,{variant:"brand",size:"medium",onClick:de,children:F.formatMessage({id:"sorting.clear-filters"})})})}),(0,l.jsx)(J.ei,{headerTitle:T===0&&F.formatMessage({id:"sorting.header-filter"}),headerTitleVisibility:"onScroll",headerTitleAriaHidden:!0,onCloseClick:oe,footer:B=>{let{showBackground:ne}=B;return(0,l.jsx)(A,{children:(0,l.jsx)(x,{className:ne?U.hf.medium:void 0,children:(0,l.jsx)(K.$n,{stretch:!0,"data-test-id":"closeFilterButton",variant:re?"primary":"secondary",size:"large",disabled:ie===0,onClick:ee,children:G?F.formatMessage({id:"sorting.apply"},{count:ie}):se?F.formatMessage({id:"sorting.apply-no-count"}):F.formatMessage({id:"state.close"})})})})},children:(0,l.jsxs)(f,{children:[(0,l.jsx)(W,{children:F.formatMessage({id:"sorting.header-filter"})}),v?.map(B=>(0,l.jsx)(c.f,{isLastSection:!1,filterSection:B,activeFiltersBySection:M,defaultActiveFiltersBySection:{},setActiveFiltersBySection:V},B.slug)),(0,l.jsxs)(m,{children:[(0,l.jsx)(N,{children:F.formatMessage({id:"sorting.header-sort"})}),(0,l.jsx)(O,{children:(0,l.jsx)(q.U,{legend:F.formatMessage({id:"sorting.header-sort"}),name:"filter_and_sort_modal_sort_by",defaultOption:{value:"recommended",dataTestId:"sortOptions.recommended",text:F.formatMessage({id:"sorting.options.recommended"})},onChange:ue,sortOptions:y,activeSortOption:I})})]})]})})]})};n(83160)},7318:(te,D,n)=>{n.r(D)},35895:(te,D,n)=>{n.d(D,{W:()=>l});const l=h=>Object.entries(h)},78458:(te,D,n)=>{n.d(D,{T:()=>R});var l=n(19577),h=n(8769),U=n(18509),X=n(1152),P=n(90379),K=n(15028),j=n(99724),Y=n(82468),Z=n(35895),$=n(32762);const E=(r,e,s)=>{let i=new URLSearchParams;return s&&(i=new URLSearchParams(s)),e?.forEach(a=>{const o=a.slug,v=r[o];v?.length?i.set(o,v.join(",")):i.delete(o)}),i},J=r=>{const e=(0,l.c)(15);let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=j.partial({filters:j.string,sorting:j.string}),e[0]=s):s=e[0];const[i,a]=(0,Y.s)(s);let o;e[1]!==i?(o=i===void 0?{}:i,e[1]=i,e[2]=o):o=e[2];const v=o,{filters:g,sorting:T}=v;let u;e[3]!==g||e[4]!==a||e[5]!==r?(u=C=>{const{filters:I,sorting:H}=C,M=E(I,r,g),V=(0,$.H)({urlSearchParams:M,limit:2e3}).toString();a({filters:V,sorting:H})},e[3]=g,e[4]=a,e[5]=r,e[6]=u):u=e[6];const y=u,L=f;let k;e:{if(g&&r){let I;e[7]!==g||e[8]!==r?(I=L(g,r),e[7]=g,e[8]=r,e[9]=I):I=e[9],k=I;break e}let C;e[10]===Symbol.for("react.memo_cache_sentinel")?(C={},e[10]=C):C=e[10],k=C}const w=T??"recommended";let F;return e[11]!==y||e[12]!==k||e[13]!==w?(F={filters:k,sorting:w,setFilterAndSort:y},e[11]=y,e[12]=k,e[13]=w,e[14]=F):F=e[14],F},_=r=>e=>(e.sorting?.sortables??[]).some(i=>i.id===r),q=(r,e)=>e.length===0?e:e.filter(_(r)).sort((s,i)=>{const a=s.sorting?.sortables.find(v=>v.id===r)?.value??0,o=i.sorting?.sortables.find(v=>v.id===r)?.value??0;return a===o?0:a<o?-1:1}),S=(r,e)=>(0,h.isEmpty)(e)?r:r?.filter(s=>(0,Z.W)(e).every(i=>{let[a,o]=i;return s?.filtering?.filters.some(v=>{let{id:g,values:T}=v;return a===g&&o.some(u=>T.includes(u))})})),t=(r,e)=>(0,h.isEmpty)(e)?r:(0,K.jM)(r.filter(i=>i.template==="venue-vertical-list"),i=>{i.forEach(a=>{a.template==="venue-vertical-list"&&(a.items=S(a.items,e))})}),p=(r,e)=>e==="recommended"||!e?r:(0,K.jM)(r,s=>{s.forEach(i=>{i.template==="venue-vertical-list"&&(i.items=q(e,i.items))})}),c=r=>{let{sections:e,filters:s,sorting:i}=r;const a=t(e,s);return p(a,i)};function f(r,e){const s={},i=new URLSearchParams(r);return e.forEach(a=>{const{slug:o,values:v}=a,T=i.get(o)?.split(",")?.filter(u=>v.some(y=>y.slug===u));T&&(s[o]=T)}),s}var m=n(1209);const O="sorting",W="category",N={"single-select":"single_select","multi-select":"multi_select",toggle:"toggle"},A=r=>r?.map(e=>({slug:e.id,title:e.name,type:N[e.type],values:e.values.map(s=>({selected:!1,slug:s.id,title:s.name}))?.sort((s,i)=>s.slug.localeCompare(i.slug))})),x=r=>{const e=r?.find(s=>s.template==="venue-vertical-list");return e?.template!=="venue-vertical-list"?[]:e?.items?.map(s=>s.filtering?.filters.map(i=>({slug:i.id,values:i.values}))??[])??[]},b=r=>r?.sections.map(e=>e.template!=="venue-vertical-list"?e:{...e,items:e.items.map(s=>({...s,filtering:{filters:s.filtering?.filters?.map(i=>({id:i.id,values:i.values}))||[]}}))})||[],R=r=>{const e=(0,l.c)(24),s=r?.sections;let i;e[0]!==s?(i=x(s),e[0]=s,e[1]=i):i=e[1];const a=i;r?.filtering?.filters;let o;const v=r?.filtering?.filters;let g;e[2]!==v?(g=A(v),e[2]=v,e[3]=g):g=e[3],o=g;const T=o,{filters:u,sorting:y,setFilterAndSort:L}=J(T);let k;e[4]!==u?(k=(0,h.sum)(Object.values(u).map(d)),e[4]=u,e[5]=k):k=e[5];const w=k;let F,C;e[6]!==r||e[7]!==u||e[8]!==y?(C=c({sections:b(r),filters:u,sorting:y}),e[6]=r,e[7]=u,e[8]=y,e[9]=C):C=e[9],F=C;const I=F;let H,M;if(e[10]!==u||e[11]!==y){let G;e[13]!==y?(G=y!=="recommended"?[{section_slug:O,values:[y]}]:[],e[13]=y,e[14]=G):G=e[14],M=[...(0,h.isEmpty)(u)?[]:(0,m.i)(u),...G],e[10]=u,e[11]=y,e[12]=M}else M=e[12];H=M;const V=H;let z;return e[15]!==V||e[16]!==w||e[17]!==I||e[18]!==T||e[19]!==u||e[20]!==y||e[21]!==L||e[22]!==a?(z={initialActiveFiltersBySection:u,initialActiveSortOption:y,sortingSectionSlug:O,filtersSectionSlug:W,filters:T,filterCount:w,venueFilters:a,filteredSections:I,changedFilters:V,setFilterAndSort:L},e[15]=V,e[16]=w,e[17]=I,e[18]=T,e[19]=u,e[20]=y,e[21]=L,e[22]=a,e[23]=z):z=e[23],z};function d(r){return r.length}},80656:(te,D,n)=>{n.d(D,{x:()=>q});var l=n(19577),h=n(48419),U=n(21429),X=n(57666),P=n(16085),K=n(82312);function j(S){let{item:t,sectionIndex:p,trackId:c,itemIndex:f}=S;return{page:c,trackId:c,sectionIndex:p,itemIndex:f,venueCategoryName:t.template??"",venueCategoryTitle:t.title??"",venueCategoryId:t.track_id??""}}const Y=S=>{let{view:t,...p}=S;const c=j(p);switch(t){case"restaurants":P.Ep.restaurantsInteractionVenueCategory(c);break;case"retail":P.Ep.retailInteractionVenueCategory(c);break;default:break}},Z=S=>{let{view:t,...p}=S;const c=j(p);switch(t){case"restaurants":P.Ep.restaurantsImpressionVenueCategory(c);break;case"retail":P.Ep.retailImpressionVenueCategory(c);break;default:break}},$=S=>{let{view:t,...p}=S;const c=J(p);switch(t){case"restaurants":P.Ep.restaurantsImpressionVenue(c);break;case"retail":P.Ep.retailImpressionVenue(c);break;default:break}},E=S=>{let{view:t,...p}=S;const c=J(p);switch(t){case"restaurants":P.Ep.restaurantsInteractionVenue(c);break;case"retail":P.Ep.retailInteractionVenue(c);break;default:break}};function J(S){let{item:t,itemIndex:p,sectionIndex:c,trackId:f,track_id:m,activeLocationCoordinates:O,isVenueItemPreview:W,menuItemIndex:N}=S;const A=+((0,U.g)(t.venue.location,O)?.toFixed(2)??0),{estimateMin:x,estimateMax:b}=(0,X.J)(t.venue?.estimate_range);return{deliveryPrice:t.venue.delivery_price_int,deliveryPriceCurrency:t.venue.currency,venueFavourite:t.venue.favourite,venueId:t.venue?.id,venueName:t.venue?.name,venuePriceRange:t.venue.price_range,venueRating:t.venue.rating?.rating,venueRatingCount:t.venue.rating?.volume,venueTags:t.venue.tags,deliveryPriceHighlight:t.venue.delivery_price_highlight??!1,showWoltPlus:t.venue.show_wolt_plus??!1,deliveryDistance:A,advertisingMetadata:t.advertising_metadata?{campaignId:t.advertising_metadata.campaign_id,adGroupId:t.advertising_metadata.ad_group_id,auctionId:t.advertising_metadata.auction_id,gtin:t.advertising_metadata.gtin,venueId:t.advertising_metadata.venue_id,isCpg:t.advertising_metadata.is_cpg??"false",adCampaignType:t.advertising_metadata.ad_campaign_type}:null,venueBadges:t.venue.telemetry_venue_badges,venueOpen:t.venue.online,venueStatus:t.overlay_v2?.telemetry_status??null,imageUrl:t.image?.url,itemIndex:p,sectionIndex:c,estimateMax:b,estimateMin:x,page:f,trackId:m??"",isVenueItemPreview:W,menuItemIndex:N}}function _(S){return!!S.advertising_metadata}const q=S=>{const t=(0,l.c)(19),{activeLocationCoordinates:p,telemetryResponseId:c,trackId:f,view:m}=S,O=(0,K.yl)();let W;t[0]!==p||t[1]!==c||t[2]!==f||t[3]!==m?(W=(r,e)=>(s,i,a)=>{const{track_id:o}=s;return()=>{!m||f===void 0||(h.BD.is(s)?h.Vl.is(r):h.MX.is(s)&&s.venue?["retail","restaurants"].includes(m)&&$({view:m,item:s,itemIndex:i,sectionIndex:e,telemetryObjectId:s.telemetry_object_id,telemetryResponseId:c,trackId:f,track_id:o,activeLocationCoordinates:p,isVenueItemPreview:a?.isVenueItemPreview??!1,menuItemIndex:a?.menuItemIndex??null}):["retail","restaurants"].includes(m)&&Z({view:m,item:s,itemIndex:i,sectionIndex:e,telemetryResponseId:c,telemetryObjectId:s.telemetry_object_id,trackId:f}))}},t[0]=p,t[1]=c,t[2]=f,t[3]=m,t[4]=W):W=t[4];const N=W;let A;t[5]!==p||t[6]!==O||t[7]!==c||t[8]!==f||t[9]!==m?(A=(r,e)=>(s,i,a)=>()=>{!m||!f||h.Vl.is(r)||h.TH.is(s)||(["retail","restaurants"].includes(m)&&h.MX.is(s)&&s.venue?E({view:m,item:s,itemIndex:i,sectionIndex:e,telemetryResponseId:c,telemetryObjectId:s.telemetry_object_id,trackId:f,track_id:s.track_id,activeLocationCoordinates:p,isVenueItemPreview:a?.isVenueItemPreview??!1,menuItemIndex:a?.menuItemIndex??null}):["retail","restaurants"].includes(m)?Y({view:m,item:s,itemIndex:i,sectionIndex:e,telemetryResponseId:c,telemetryObjectId:s.telemetry_object_id,trackId:f}):O({type:"discoveryItemClick",payload:{viewName:m,contentType:a?.contentType??"",itemIndex:i,sectionIndex:String(e),sectionName:r.name,sectionTitle:r.title??"",title:s.title??"",trackId:s.track_id??"",advertising_metadata:_(s)?s.advertising_metadata:void 0,page:f??""}}))},t[5]=p,t[6]=O,t[7]=c,t[8]=f,t[9]=m,t[10]=A):A=t[10];const x=A;let b;t[11]!==O||t[12]!==f||t[13]!==m?(b=(r,e)=>()=>{!m||!f||O({type:"discoveryClickSeeAll",payload:{viewName:m,page:f,view:m,sectionIndex:e,sectionName:r.name,sectionTitle:r.title??"",sectionType:r.template??"",sectionId:r.content_id}})},t[11]=O,t[12]=f,t[13]=m,t[14]=b):b=t[14];const R=b;let d;return t[15]!==x||t[16]!==R||t[17]!==N?(d={clickEventCreator:x,impressionEventCreator:N,clickSeeAllEventCreator:R},t[15]=x,t[16]=R,t[17]=N,t[18]=d):d=t[18],d}},83160:(te,D,n)=>{n.r(D)},84616:(te,D,n)=>{n.d(D,{k:()=>N,g:()=>W});var l=n(44489),h=n(75326),U=n(8769),X=n(44349),P=n(87925),K=n(27469),j=n(73748),Y=n(64676),Z=n(82312),$=n(16852),E=n(16085);function J(A){let{discoveryViewName:x,trackId:b}=A;switch(x){case"retail":E.Ep.retailInteractionFilters({page:b});break;case"restaurants":E.Ep.restaurantsInteractionFilters({page:b});break;default:break}}var _=n(39046),q=n(1209);const S=(0,h.I)("div")({name:"TitleWrapper",class:"t16l6pk8",propsAsIs:!1}),t=(0,h.I)("div")({name:"TitleWrapperRow",class:"te7l3xj",propsAsIs:!1}),p=()=>A=>{let{customMarginBottom:x}=A;return x?`${x}px`:"40px"},c=()=>A=>{let{isMarketingBanner:x}=A;return x?"16px":0},f=(0,h.I)("div")({name:"SectionWrapper",class:"s3d7ju0",propsAsIs:!1,vars:{"s3d7ju0-0":[p()],"s3d7ju0-1":[c()]}}),m=(0,h.I)("div")({name:"OpenFiltersButtonContainer",class:"ohw1u0f",propsAsIs:!1}),O=(0,h.I)("div")({name:"HowSearchWorksLinkWithTextWrapper",class:"hnhc5te",propsAsIs:!1}),W=A=>{const x=(0,$.O)(A);return b=>{let{discoveryViewName:R,data:d,"data-test-id":r,impressionEventCreator:e,clickEventCreator:s,clickSeeAllEventCreator:i,discoveryFilterProps:a,metadata:o,headingTitle:v,subHeadingTitle:g,onClickFilterAndSort:T,citySlug:u,districtSlug:y,countrySlug:L,robots:k,shouldShowHeadingTitle:w,sectionTelemetry:F,isWoltPlusRebrandingEnabled:C}=b;const{formatMessage:I}=(0,P.tz)(),H=(0,Z.yl)(),[M,V]=(0,X.useState)(!1),{filters:z,initialActiveFiltersBySection:G,filterCount:ie,initialActiveSortOption:se,filteredSections:re,venueFilters:ae,sortingSectionSlug:ce,setFilterAndSort:oe}=a,de=(0,X.useCallback)(()=>{R&&(H({type:"clickShowFilterAndSortingButton",payload:{viewName:R,page:d.track_id}}),J({discoveryViewName:R,trackId:d.track_id})),T?.(),V(!0)},[H,d.track_id,R,T]),ue=(0,X.useCallback)(()=>V(!1),[]),{description:ee,title:B}=o||{},ne=d.show_large_title||d.sections.every(Q=>Q.template==="no-content"),me=w||ne;return(0,l.jsxs)("div",{className:"rtl","data-test-id":r,children:[(0,l.jsx)(j.O,{description:(0,U.isString)(ee)?ee:ee?.key??"discovery.description",descriptionParams:(0,U.isString)(ee)?void 0:ee?.params,title:(0,U.isString)(B)?B:B?.title,titleParams:(0,U.isString)(B)?void 0:B?.params,titleTemplate:(0,U.isString)(B)?"metadata.header-with-pipe":B?.template,robots:k}),me&&(0,l.jsxs)(S,{children:[(0,l.jsxs)(t,{children:[(0,l.jsx)(_.w,{title:v,subTitle:g,pageTitleIcon:d.page_title_icon?.icon||void 0}),d.filtering?.filters[0]&&d.sorting?.sortables&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(m,{children:(0,l.jsx)(K.P,{onClick:de,filterCount:ie,sortOption:d.sorting.sortables.find(Q=>Q.id===se)?.name??I({id:"sorting.options.recommended"})})}),(0,l.jsx)(q.x,{sortingSectionSlug:ce,onClose:ue,show:M,onSubmit:(Q,le)=>{oe({filters:Q,sorting:le})},initialActiveFiltersBySection:G,initialActiveSortOption:se,sortOptions:d.sorting.sortables,filters:z,filterCount:ie,venueFilters:ae,trackId:d.track_id})]})]}),d?.how_search_works_link&&d?.how_search_works_link.type==="text"&&(0,l.jsx)(O,{children:(0,l.jsx)(Y.j,{type:d?.how_search_works_link.type,dataTestId:"DiscoveryPageHowSearchWorksLinkWithText",url:d?.how_search_works_link.url})})]}),re.map((Q,le)=>(0,l.jsx)(f,{isMarketingBanner:Q.template==="marketing-banner",customMarginBottom:Q.template==="product-line-navigation-large"?20:void 0,children:(0,l.jsx)(x,{cityData:d.city_data,citySlug:u,clickEventCreator:s,clickSeeAllEventCreator:i,countrySlug:L,discoveryViewName:R,districtSlug:y,first:le===0,howSearchWorksLinkUrl:d?.how_search_works_link?.type==="icon-only"?d.how_search_works_link?.url:void 0,impressionEventCreator:e,rootTrackId:d.track_id,section:Q,sectionIndex:le,showSingleVenueDetails:d.show_single_venue_details,sortCriteria:se,telemetry:F,telemetryResponseId:d.telemetry_response_id,isWoltPlusRebrandingEnabled:C})},`${Q.name}${le}`))]})}},N=W({});n(7318)}}]);

//# sourceMappingURL=https://sourcemaps.internal.wolt.com/wolt-com/8038-64285bfee8a7ccacc673.chunk.js.map