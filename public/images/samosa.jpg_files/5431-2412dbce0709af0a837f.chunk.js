"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[5431],{127:(je,se,s)=>{s.r(se),s.d(se,{medium:()=>Re,small:()=>Ie});var n=s(44349),O=s(44489);const Ie=Object.assign((0,n.forwardRef)(function(b,ye){return(0,O.jsxs)("svg",{viewBox:"0 0 16 16",ref:ye,...b,children:[(0,O.jsx)("path",{d:"M7.607 5.562c-.023.015-.077.06-.19.28a.75.75 0 0 1-1.335-.684c.141-.275.338-.606.689-.842.359-.24.776-.316 1.229-.316 1.132 0 2 .868 2 2 0 .451-.116.821-.31 1.13-.182.29-.416.496-.572.632-.347.302-.368.34-.368.488a.75.75 0 0 1-1.5 0c0-.862.533-1.319.828-1.572l.054-.047c.157-.136.235-.215.288-.298a.6.6 0 0 0 .08-.333c0-.304-.196-.5-.5-.5-.297 0-.378.051-.393.062M8 12a1 1 0 1 0 0-2 1 1 0 0 0 0 2"}),(0,O.jsx)("path",{d:"M8 15a7 7 0 1 0 0-14 7 7 0 0 0 0 14m0-1.5a5.5 5.5 0 1 1 0-11 5.5 5.5 0 0 1 0 11"})]})}),{__al_size:"small"}),Re=Object.assign((0,n.forwardRef)(function(b,ye){return(0,O.jsxs)("svg",{viewBox:"0 0 24 24",ref:ye,...b,children:[(0,O.jsx)("path",{d:"M12 9c-.379 0-.715.208-.884.5a1 1 0 0 1-1.732-1 3.03 3.03 0 0 1 2.616-1.5 3 3 0 0 1 3 3c0 .673-.18 1.222-.52 1.663-.313.407-.713.651-.961.801-.3.183-.398.244-.465.318l-.003.004c-.016.017-.051.053-.051.214a1 1 0 1 1-2 0c0-.647.21-1.161.571-1.56.278-.307.633-.519.846-.647l.064-.038c.252-.153.352-.231.414-.312.036-.046.105-.15.105-.443a1 1 0 0 0-1-1M13 16a1 1 0 1 1-2 0 1 1 0 0 1 2 0"}),(0,O.jsx)("path",{d:"M22 12c0 5.523-4.477 10-10 10s-10-4.477-10-10 4.477-10 10-10 10 4.477 10 10m-2 0a8 8 0 1 0-16 0 8 8 0 0 0 16 0"})]})}),{__al_size:"medium"})},355:(je,se,s)=>{s.r(se)},13771:(je,se,s)=>{s.r(se)},15235:(je,se,s)=>{s.r(se)},22065:(je,se,s)=>{s.d(se,{b:()=>Ie});var n=s(44349),O=s(58859);const Ie=Re=>{let{country:T,useSignupConsentsQuery:b=O.F}=Re;const ye=b({country:T});return(0,n.useMemo)(()=>ye?ye.filter(Je=>Je.screen==="MarketingConsents").map(Je=>{let{marketingConsentsDefault:lt,marketingConsentsText:Ze,id:tt,link:Xe,slug:Ke}=Je;return{defaultValue:lt??!0,id:tt,link:typeof Xe?.ariaLabel=="string"?{ariaLabel:Xe.ariaLabel,url:Xe.url}:null,slug:Ke,text:Ze}}):void 0,[ye])}},30982:(je,se,s)=>{s.r(se)},34243:(je,se,s)=>{s.r(se)},35107:(je,se,s)=>{s.r(se)},39179:(je,se,s)=>{s.d(se,{d:()=>O});var n=s(2294);const O=Ie=>{let{emailToken:Re}=Ie;return n.f8.post("/v1/wauth2/consumer-sms-email-verification",{email_token:Re})}},41283:(je,se,s)=>{s.r(se)},57871:(je,se,s)=>{s.d(se,{N:()=>O});var n=s(2294);const O=Ie=>n.ut.put("/v1/user/me/consents",Ie)},58859:(je,se,s)=>{s.d(se,{F:()=>Ie});var n=s(19577),O=s(91111);const Ie=T=>{const b=(0,n.c)(2);let ye;b[0]!==T?(ye={select:et=>{const{data:at}=et;return at.filter(Ze=>{const tt=Ze.country==="WOLTWIDE"||Ze.country===T.country,Xe=Ze.visibility.includes("signup");return tt&&Xe}).map(Re)},refetchOnWindowFocus:!1,refetchOnMount:!1,retry:!0},b[0]=T,b[1]=ye):ye=b[1];const{data:rt}=(0,O.z)(ye);return rt};function Re(T){const{aria_label:b,default:ye,id:rt,required:et,signup_default:at,signup_title:Je,slug:lt,title:Ze,url:tt,url_text:Xe,visibility:Ke}=T,Z=Ke.includes("signup_v2")?"MarketingConsents":"CreateAccount";return{createAccountDefault:ye,createAccountText:Ze,marketingConsentsDefault:at,marketingConsentsText:Je??Ze,id:rt,link:typeof tt=="string"&&typeof Xe=="string"?{ariaLabel:b??null,text:Xe,url:tt}:null,required:et,screen:Z,slug:lt}}},68125:(je,se,s)=>{s.d(se,{p:()=>n});const n=O=>O||"ROU"},70847:(je,se,s)=>{s.d(se,{D:()=>Ie});var n=s(2294),O=s(73704);const Ie=(Re,T)=>{try{return n.Zr.post("/subscriptions-api/v1/emag-login",{country:T,emag_access_token:Re})}catch(b){O.J.addError(b)}}},87403:(je,se,s)=>{s.r(se)},88012:(je,se,s)=>{s.d(se,{W:()=>Ie});var n=s(44349),O=s(58859);const Ie=Re=>{let{country:T,useSignupConsentsQuery:b=O.F}=Re;const ye=b({country:T});return(0,n.useMemo)(()=>{if(!ye)return;const et=ye,at=et.some(Je=>Je.screen==="MarketingConsents");return{consents:et.map(Je=>{let{createAccountDefault:lt,createAccountText:Ze,id:tt,required:Xe,link:Ke,slug:Z}=Je;return{defaultValue:lt,id:tt,text:Ze,required:Xe,link:Ke,slug:Z}}),isOneClickConsentFlow:at}},[ye])}},89309:(je,se,s)=>{s.r(se)},91111:(je,se,s)=>{s.d(se,{z:()=>Xe});var n=s(19577),O=s(55361),Ie=s(87925),Re=s(99665),T=s(99724),b=s(2294),ye=s(28621),rt=s(6647),et=s(96318);const at=T.keyof({app_start:null,settings:null,signup:null,signup_v2:null}),Je=T.intersection([T.type({id:T.string,title:T.string,default:T.boolean,required:T.boolean,slug:T.string,visibility:T.array(at),country:T.union([Re.pm,T.literal("WOLTWIDE")])}),T.partial({aria_label:(0,ye.U)(T.string),description:(0,ye.U)(T.string),signup_title:(0,ye.U)(T.string),signup_default:(0,ye.U)(T.boolean),url:(0,ye.U)(T.string),url_text:(0,ye.U)(T.string)})]),lt=T.array(Je),Ze=async Ke=>{let{language:Z}=Ke;return await(0,rt.A)(lt,b.ut.get("/v2/config/consents",{headers:{"App-Language":(0,et.L)(Z)}}),{reportErrors:!0})},tt=Ke=>{let{language:Z}=Ke;return["consentsConfig",Z]},Xe=Ke=>{const Z=(0,n.c)(8),{locale:nt}=(0,Ie.tz)();let K;Z[0]!==nt?(K=tt({language:nt}),Z[0]=nt,Z[1]=K):K=Z[1];let ft;Z[2]!==nt?(ft=()=>Ze({language:nt}),Z[2]=nt,Z[3]=ft):ft=Z[3];let vt;return Z[4]!==Ke||Z[5]!==K||Z[6]!==ft?(vt={queryKey:K,queryFn:ft,...Ke},Z[4]=Ke,Z[5]=K,Z[6]=ft,Z[7]=vt):vt=Z[7],(0,O.I)(vt)}},91311:(je,se,s)=>{s.r(se)},95431:(je,se,s)=>{s.d(se,{f:()=>Os,N:()=>An});var n=s(44489),O=s(19577),Ie=s(96254),Re=s(42383),T=s(99724),b=s(44349),ye=s(57871),rt=s(66742),et=s(96734),at=s(33340),Je=s(31684),lt=s(63760),Ze=s(86750),tt=s(62462),Xe=s(51551),Ke=s(59302),Z=s(87925),nt=s(70118),K=s(87437),ft=s(5212),vt=s(53495),$e=s(34819),Ot=s(98754),te=s(16085),Tt=s(82312),ct=s(2294),At=s(6647);const wn=T.type({status:T.string,results:T.array(T.type({id:T.type({$oid:T.string})}))}),Nn=o=>(0,At.A)(wn,ct.ut.patch("/v1/user/me",{client_id:"web",...o}));var Bt=s(70847);const Ln=T.type({id:T.string,login_token:T.string}),Mn=o=>{let{authToken:t,marketingConsents:a}=o;return(0,At.A)(Ln,ct.Zr.post("/user-migration/v1/migrate",{token_type:t.method,token:t.value,consents:a}))},In=T.union([T.type({id:T.string}),T.partial({login_token:T.string})]),xn=o=>{let{recaptchaResult:t,...a}=o;return(0,At.A)(In,ct.ut.post("/v2/user",{client_id:"web",...a},{headers:{"h-captcha-response":t}}))};var tn=s(28621);const zs=(0,tn.Z)({attribution:T.string,email:T.string,ref:(0,tn.U)(T.string)},{userFlow:T.literal("courier_signup"),recaptchaResult:T.string}),Vn=T.partial({account_found:T.boolean}),Wt=async o=>{let{attribution:t,email:a,recaptchaResult:r,ref:l,userFlow:C}=o;return(0,At.A)(Vn,ct.f8.post("/v3/users/email_login",{attribution:t,email:a,user_flow:C,audience:$e._K.WOLT_AUTH_AUDIENCE??"wolt-com",ref:l},{headers:{"h-captcha-response":r}}))},Tn=o=>ct.f8.post("/v1/wauth2/me/request_number_verification",o,{});var Un=s(39179);const jn=o=>{let{emailToken:t,smsCode:a}=o;return ct.f8.post("/v1/wauth2/consumer-sms-email-verification-validate",{email_token:t,sms_code:a})},Rn=T.type({email:T.string,phone_number:T.string}),Pn=o=>{let{method:t,linkId:a}=o;return(0,At.A)(Rn,ct.f8.post(`/v1/wauth2/login_methods/${t}/start_verification`,{new_login_method_identifier:a}))};var nn=s(64478);const Dn=o=>{let{code:t,linkId:a,method:r}=o;return ct.f8.post(`/v1/wauth2/login_methods/${r}/verify`,{new_login_method_identifier:a,verification_code:t})},Fn=o=>ct.f8.post("/v1/wauth2/me/verify_number",o,{});var x=s(75326),On=s(49159),on=s(73704),dt=s(39025),sn=s(5540),Pe=s(99549),gt=s(88853),ut=s(1859),bt=s(8769),zt=s(30172),ht=s(34575),Lt=s(37506),$t=s(11202),_t=s(36116),Ht=s(73422);function rn(o){return o.number?.e164}const Bn=(0,x.I)("div")({name:"AnimationWrapper",class:"a1q9mwtx",propsAsIs:!1}),Wn=(0,x.I)("div")({name:"AnimationContainer",class:"a1alqyo4",propsAsIs:!1}),zn=()=>zt.f,$n=(0,x.I)(zn())({name:"StyledLottiePlayer",class:"s13p8th3",propsAsIs:!0}),_n=(0,x.I)("div")({name:"Title",class:"t16a6atp",propsAsIs:!1}),Hn=()=>ht.F,Kn=(0,x.I)(Hn())({name:"StyledAlert",class:"s1n2ncjz",propsAsIs:!0}),Gn=(0,x.I)("form")({name:"Form",class:"f1l59bbn",propsAsIs:!1}),Qn=()=>Lt.O,Yn=(0,x.I)(Qn())({name:"StyledFieldErrorWrapper",class:"s1a2ql5a",propsAsIs:!0}),Jn=(0,x.I)("div")({name:"FieldContainer",class:"f19gpl7t",propsAsIs:!1}),Zn=()=>$t.m,Xn=(0,x.I)(Zn())({name:"StyledDropdown",class:"spbvisw",propsAsIs:!0}),qn=(0,x.I)("footer")({name:"ModalButtonFooter",class:"mrpgg50",propsAsIs:!1}),an={changePhoneNumberInput:"ChangePhoneNumber.ChangePhoneNumberInput",submitChangePhoneNumberButton:"ChangePhoneNumber.SubmitChangePhoneNumberButton"},eo=o=>{"use no memo";let{errorMessage:t,initialPhoneNumber:a,isLoading:r,onSubmit:l}=o;const C=(0,Z.tz)(),y=(0,b.useMemo)(()=>{if(a===null)return{countryCode:"",phoneNumber:""};const F=(0,ut.lq)(a);return{countryCode:F.regionCode??"",phoneNumber:F.number?.significant??""}},[]),{register:I,handleSubmit:V,watch:v}=(0,_t.g)({defaultValues:y}),E=(0,b.useMemo)(()=>{const F=Intl?.DisplayNames?new Intl.DisplayNames([C.locale],{type:"region"}):null,ee=ie=>{const ae=`+${(0,ut.qY)(ie)}`,G=F?.of(ie);return!F||G===void 0?`${ie} (${ae})`:`${G} (${ae})`};return(0,bt.sortBy)((0,ut.LU)().map(ie=>({value:ie,label:ee(ie)})),"label")},[C.locale]),{phoneNumber:U,countryCode:$}=v(),z=(0,b.useMemo)(()=>(0,ut.lq)(U,{regionCode:$}),[U,$]).valid,X=!z||r,re=!!t,q=z?void 0:C.formatMessage({id:"auth.change-phone-number.error-invalid-phone-number"});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Bn,{children:(0,n.jsx)(Wn,{children:(0,n.jsx)($n,{src:Ht.L.wide.phoneButtons})})}),(0,n.jsx)(_n,{children:C.formatMessage({id:"auth.change-phone-number.title"})}),(0,n.jsxs)(Gn,{onSubmit:V(F=>{const ee=(0,ut.lq)(F.phoneNumber,{regionCode:F.countryCode});l(rn(ee)??"")}),children:[(0,n.jsx)(Yn,{errorMessage:q,children:(0,n.jsxs)(Jn,{children:[(0,n.jsx)(Xn,{...I("countryCode"),placeholder:"",label:C.formatMessage({id:"auth.change-phone-number.country"}),options:E}),(0,n.jsx)(gt.pd,{...I("phoneNumber"),id:"change-phone-number-form-input","data-test-id":an.changePhoneNumberInput,label:C.formatMessage({id:"auth.change-phone-number.phone-number"})})]})}),re&&(0,n.jsx)(Kn,{variant:"error",style:{marginBottom:(0,sn.a8)(8)},children:t}),(0,n.jsx)(qn,{style:{marginTop:(0,sn.a8)(8)},children:(0,n.jsx)(Pe.$n,{size:"large",variant:"primary",stretch:!0,type:"submit","data-test-id":an.submitChangePhoneNumberButton,disabled:X,loading:r,children:C.formatMessage({id:"auth.change-phone-number.save"})})})]})]})};s(34243);var Kt=s(37815),to=s(57511),kt=s(78217),Ct=s(66609),ln=s(50940),Mt=s(21970);const Be={continue:"CreateAccount.Continue",consent:o=>`CreateAccount.Consent-${o}`,consentLink:o=>`CreateAccount.ConsentLink-${o}`,consentError:o=>`CreateAccount.ConsentError-${o}`,country:"CreateAccount.Country",countryError:"CreateAccount.CountryError",firstName:"CreateAccount.FirstName",firstNameError:"CreateAccount.FirstNameError",lastName:"CreateAccount.LastName",lastNameError:"CreateAccount.LastNameError",phoneNumber:"CreateAccount.PhoneNumber",phoneNumberCountryCode:"CreateAccount.PhoneNumberCountryCode",phoneNumberError:"CreateAccount.PhoneNumberError",privacyPolicyLink:"CreateAccount.PrivacyPolicyLink",referralCode:"CreateAccount.ReferralCode",termsOfServiceLink:"CreateAccount.TermsOfServiceLink",submitError:"CreateAccount.SubmitError",email:"CreateAccount.Email"},Gt=o=>`consent-${o}`,no=(0,x.I)("div")({name:"Root",class:"r1w64lfk",propsAsIs:!1}),oo=(0,x.I)("h2")({name:"Title",class:"t1v225ky",propsAsIs:!1}),io=(0,x.I)("div")({name:"SubTitle",class:"s8roxki",propsAsIs:!1}),so=(0,x.I)("form")({name:"Form",class:"ffs3u0m",propsAsIs:!1}),ro=()=>Lt.O,cn=(0,x.I)(ro())({name:"NameFieldErrorWrapper",class:"n1q0gpvi",propsAsIs:!0}),Qt=(0,x.I)("div")({name:"FieldWrapper",class:"fcr9yke",propsAsIs:!1}),ao="cd620op",lo=()=>$t.m,co=(0,x.I)(lo())({name:"CountryDropdown",class:"c1086jiv",propsAsIs:!0}),uo=()=>$t.m,mo=(0,x.I)(uo())({name:"PhoneNumberCountryCodeDropdown",class:"p197no14",propsAsIs:!0}),fo=()=>kt.P.div,ho=(0,x.I)(fo())({name:"ConsentWrapper",class:"cqwdvfr",propsAsIs:!0}),po=(0,x.I)("div")({name:"ConsentLabelWrapper",class:"c1o58jwp",propsAsIs:!1}),go=()=>Pe.gc,Co=(0,x.I)(go())({name:"ConsentLink",class:"cq4b5h",propsAsIs:!0}),yo=(0,x.I)("div")({name:"LegalStatement",class:"lepjr8s",propsAsIs:!1}),bo=()=>{const o=(0,O.c)(2),{formatMessage:t}=(0,Z.tz)();let a;return o[0]!==t?(a=(l,C)=>{if(!(0,ut.lq)(l,{regionCode:C}).valid)return t(l===""?{id:"auth.create-account.error-phone-number-required"}:{id:"auth.create-account.error-invalid-phone-number"})},o[0]=t,o[1]=a):a=o[1],a},So=()=>{const o=(0,O.c)(2),{formatMessage:t}=(0,Z.tz)();let a;return o[0]!==t?(a=l=>{if(l.trim()){if((0,Mt.hn)(l))return t({id:"auth.create-account.error-name-no-emojis"});if((0,Mt.yU)(l))return t({id:"auth.create-account.error-name-invalid-characters"})}else return t({id:"auth.create-account.error-first-name-required"})},o[0]=t,o[1]=a):a=o[1],a},vo=()=>{const o=(0,O.c)(2),{formatMessage:t}=(0,Z.tz)();let a;return o[0]!==t?(a=l=>{if(l===void 0||!l.trim())return t({id:"auth.create-account.error-last-name-required"});if((0,Mt.hn)(l))return t({id:"auth.create-account.error-name-no-emojis"});if((0,Mt.yU)(l))return t({id:"auth.create-account.error-name-invalid-characters"})},o[0]=t,o[1]=a):a=o[1],a},Ao=o=>to.kk.some(t=>t.code===o),ko=o=>{"use no memo";let{countries:t,onSubmit:a,initialCountry:r,initialFirstName:l,initialLastName:C,initialPhoneNumber:y,initialPhoneNumberCountryCode:I,initialEmail:V,isReferralCodeInputVisible:v,isSubmitting:E,isVisible:U,privacyPolicyUrl:$,recaptcha:le,submitError:z,termsUrl:X,useConsents:re,isSkipEmailVerification:q,isAccountMigration:F,description:ee}=o;const ie=(0,Z.tz)(),ae=(0,b.useMemo)(()=>(0,bt.sortBy)(t,"label").map(h=>{let{code:c,label:k}=h;return{label:k,value:c}}),[t]),G=(0,ut.LU)().map(h=>{const c=(0,ut.qY)(h);return{value:h,label:`${h} +${c}`}}),{formatMessage:B}=ie,{formState:{errors:de},getValues:be,handleSubmit:We,register:p,trigger:e,watch:i}=(0,_t.g)({defaultValues:{country:Ao(r)?r:"",firstName:l??"",lastName:C??"",phoneNumber:y??"",phoneNumberCountryCode:I,referralCode:"",email:V??""}}),{country:g,phoneNumber:m,phoneNumberCountryCode:u}=i(),d=bo(),L=So(),S=vo(),f=re({country:g}),w=(0,bt.isEmpty)(g)?{className:ao,label:"",placeholder:B({id:"auth.create-account.country-select"}),...p("country",{validate:h=>(0,bt.isEmpty)(h)?B({id:"auth.create-account.error-country-required"}):void 0})}:{label:B({id:"auth.create-account.country"}),placeholder:"",...p("country")},A=(f?.isOneClickConsentFlow===!0?[]:f?.consents)??[];return(0,dt.B)(U&&f&&g!==void 0?{name:"signUpFormView",properties:{detectedCountry:r,isConsentsLayoutSimplified:f.isOneClickConsentFlow??!1,selectedCountry:g,isNewUserAccount:!0,isUnverifiedEmailFlow:q}}:void 0),(0,n.jsxs)(no,{children:[(0,n.jsx)(oo,{children:B({id:"auth.create-account.title"})}),ee!==void 0&&(0,n.jsx)(io,{children:ee}),(0,n.jsxs)(so,{"aria-labelledby":"step-method-select-email-title",onSubmit:h=>{We(c=>{if(!c.country||!f)return;const{consents:k,isOneClickConsentFlow:N}=f,R=N??!1?k.map(j=>({id:j.id,value:j.required?!0:j.defaultValue})):k.map(j=>({id:j.id,value:c[Gt(j.id)]===!0}));te.Ep.signUpFormDataConsents({detectedCountry:r,promoConsentGiven:Object.fromEntries(R.flatMap(j=>{let{id:D,value:H}=j;const W=k.find(J=>J.id===D)?.slug;return W!==void 0?[[W,Number(H)]]:[]})),isConsentsLayoutSimplified:N??!1,selectedCountry:c.country,isUnverifiedEmailFlow:q}),a({consents:R,country:c.country,firstName:c.firstName,lastName:c.lastName,phoneNumber:rn((0,ut.lq)(m,{regionCode:u}))??"",referralCode:c.referralCode,email:c.email},{isOneClickConsentFlow:N})})(h)},children:[le,(0,n.jsx)(Lt.O,{errorMessage:de.country?.message,"data-test-id":Be.countryError,children:(0,n.jsx)(co,{disabled:E,options:ae,selectDataTestId:Be.country,...w})}),(0,n.jsxs)(Qt,{children:[(0,n.jsx)(cn,{errorMessage:de.firstName?.message,errorMessageTestId:Be.firstNameError,children:(0,n.jsx)(gt.pd,{id:"create-account-first-name",label:B({id:"auth.create-account.first-name"}),"data-test-id":Be.firstName,disabled:E,statusIcon:de.firstName!==void 0?"error":void 0,...p("firstName",{validate:L})})}),(0,n.jsx)(cn,{errorMessage:de.lastName?.message,errorMessageTestId:Be.lastNameError,children:(0,n.jsx)(gt.pd,{id:"create-account-last-name",label:B({id:"auth.create-account.last-name"}),"data-test-id":Be.lastName,disabled:E,statusIcon:de.lastName!==void 0?"error":void 0,...p("lastName",{validate:S})})})]}),F&&(0,n.jsx)(Qt,{children:(0,n.jsx)(gt.pd,{id:"create-account-email",label:B({id:"auth.create-account.email-placeholder"}),"data-test-id":Be.email,disabled:!0,...p("email")})}),(0,n.jsx)(ln.N,{messageVariant:de.phoneNumber?.message!==void 0?"error":"info",message:de.phoneNumber?.message??B({id:"auth.create-account.phone-description"}),"data-test-id":Be.phoneNumberError,children:(0,n.jsxs)(Qt,{children:[(0,n.jsx)(mo,{disabled:E,label:B({id:"auth.create-account.country"}),placeholder:"",options:G,selectDataTestId:Be.phoneNumberCountryCode,...p("phoneNumberCountryCode",{onBlur:()=>{be("phoneNumber")&&e("phoneNumber")}})}),(0,n.jsx)(gt.pd,{id:"create-account-phone-number",label:B({id:"auth.create-account.phone"}),"data-test-id":Be.phoneNumber,disabled:E,type:"tel",statusIcon:de.phoneNumber!==void 0?"error":void 0,...p("phoneNumber",{validate:()=>d(be("phoneNumber"),be("phoneNumberCountryCode"))})})]})}),v&&(0,n.jsx)(ln.N,{messageVariant:"info",message:B({id:"auth.create-account.optional-field"}),children:(0,n.jsx)(gt.pd,{id:"create-account-referral-code",label:B({id:"auth.create-account.referral-code"}),"data-test-id":Be.referralCode,disabled:E,...p("referralCode")})}),(0,n.jsx)(Ct.N,{initial:!1,children:A.map(h=>{let{id:c,text:k,link:N,required:M,slug:R}=h;return(0,n.jsx)(ho,{initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},children:(0,n.jsx)(gt.Sc,{disabled:E,label:(0,n.jsx)(Lt.O,{errorMessageTestId:Be.consentError(c),errorMessage:de[Gt(c)]?B({id:"auth.create-account.error-consent-required"}):void 0,children:(0,n.jsxs)(po,{children:[(0,n.jsx)("span",{"aria-hidden":!0,children:k}),N&&(0,n.jsx)(Co,{"data-test-id":Be.consentLink(c),href:N.url,target:"_blank",rel:"noopener noreferrer",onClick:()=>{g&&te.Ep.signUpFormInteractionReadTerms({detectedCountry:r,legalTerms:R,isConsentsLayoutSimplified:f?.isOneClickConsentFlow??!1,selectedCountry:g})},children:N.text})]})}),"data-test-id":Be.consent(c),...p(Gt(c),{required:M})})},c)})}),(0,n.jsx)(Ct.N,{children:z!==void 0&&(0,n.jsx)(kt.P.div,{initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},children:(0,n.jsx)(ht.F,{variant:"error","data-test-id":Be.submitError,children:z})})}),(0,n.jsx)(Pe.$n,{size:"large",variant:"primary",type:"submit",loading:E||f===void 0,disabled:E||f===void 0,"data-test-id":Be.continue,children:B({id:"auth.create-account.continue"})}),!!f?.isOneClickConsentFlow&&(0,n.jsx)(yo,{children:B({id:"auth.create-account.legal-statement"},{a_pp:h=>(0,n.jsx)(Pe.gc,{"data-test-id":Be.privacyPolicyLink,href:$,target:"_blank",rel:"noreferrer",size:"inherit",onClick:()=>{!g||!f||te.Ep.signUpFormInteractionReadTerms({detectedCountry:r,legalTerms:"privacy_statement",isConsentsLayoutSimplified:f.isOneClickConsentFlow??!1,selectedCountry:g})},children:h}),a_tos:h=>(0,n.jsx)(Pe.gc,{"data-test-id":Be.termsOfServiceLink,href:X,target:"_blank",rel:"noreferrer",size:"inherit",onClick:()=>{!g||!f||te.Ep.signUpFormInteractionReadTerms({detectedCountry:r,legalTerms:"terms_of_service",isConsentsLayoutSimplified:f.isOneClickConsentFlow??!1,selectedCountry:g})},children:h})})})]})]})};s(13771);var Eo=s(86118),wo=s(30294);const Ut={error:"EmailSent.Error",resend:"EmailSent.Resend",root:"EmailSent.Root",success:"EmailSent.Success"},No=(0,x.I)("div")({name:"Root",class:"r23ubf",propsAsIs:!1}),Lo=(0,x.I)("h2")({name:"Title",class:"tvyg60w",propsAsIs:!1}),Mo=(0,x.I)("div")({name:"SubTitle",class:"s1qzaf9q",propsAsIs:!1}),Io=()=>ht.F,dn=(0,x.I)(Io())({name:"StyledAlert",class:"s1y1bn0t",propsAsIs:!0}),xo=o=>{const t=(0,O.c)(43),{buttonText:a,email:r,error:l,onResendEmail:C,recaptcha:y,isNewUserAccount:I}=o,{formatMessage:V}=(0,Z.tz)(),[v,E]=(0,b.useState)();let U;t[0]!==V||t[1]!==C?(U=async()=>{E({status:"resending"}),(await C()).fold(()=>{E({status:"success",message:V({id:"auth.magic-email.email-resent"})})},L=>{E({status:"error",message:L.message})})},t[0]=V,t[1]=C,t[2]=U):U=t[2];const $=U,le=v?.status==="error"?v.message:l;let z,X;t[3]!==r?(X=(0,Eo.A)(r),t[3]=r,t[4]=X):X=t[4],z=X;const re=z;let q;t[5]!==I||t[6]!==re?(q=()=>{re&&te.Ep.requestEmailSuccessInteractionOpenEmailApp({emailProvider:re.provider,isNewUserAccount:I,isUnverifiedEmailFlow:void 0})},t[5]=I,t[6]=re,t[7]=q):q=t[7];const F=q,ee=re?re.provider:void 0;let ie;t[8]!==ee?(ie={name:"requestEmailSuccessView",properties:{emailProvider:ee,isUnverifiedEmailFlow:void 0}},t[8]=ee,t[9]=ie):ie=t[9],(0,dt.B)(ie);let ae;t[10]!==V?(ae=V({id:"auth.magic-email.title"}),t[10]=V,t[11]=ae):ae=t[11];let G;t[12]!==ae?(G=(0,n.jsx)(Lo,{children:ae}),t[12]=ae,t[13]=G):G=t[13];let B;t[14]!==r||t[15]!==V?(B=V({id:"auth.magic-email.description"},{email:r}),t[14]=r,t[15]=V,t[16]=B):B=t[16];let de;t[17]!==B?(de=(0,n.jsx)(Mo,{children:B}),t[17]=B,t[18]=de):de=t[18];let be;t[19]!==l||t[20]!==le||t[21]!==v?.message||t[22]!==v?.status?(be=(le!==void 0||v?.status==="success")&&(0,n.jsxs)(kt.P.div,{initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},children:[le!==void 0&&(0,n.jsx)(dn,{variant:"error","data-test-id":Ut.error,children:l}),v?.status==="success"&&le===void 0&&(0,n.jsx)(dn,{variant:"success","data-test-id":Ut.success,children:v?.message})]}),t[19]=l,t[20]=le,t[21]=v?.message,t[22]=v?.status,t[23]=be):be=t[23];let We;t[24]!==be?(We=(0,n.jsx)(Ct.N,{children:be}),t[24]=be,t[25]=We):We=t[25];let p;t[26]!==r||t[27]!==F?(p=(0,n.jsx)(wo.q,{email:r,onClick:F}),t[26]=r,t[27]=F,t[28]=p):p=t[28];const e=v?.status==="resending",i=v?.status==="resending";let g;t[29]!==$?(g=()=>{$()},t[29]=$,t[30]=g):g=t[30];let m;t[31]!==a||t[32]!==e||t[33]!==i||t[34]!==g?(m=(0,n.jsx)(Pe.$n,{size:"large",variant:"secondary",type:"button","data-test-id":Ut.resend,loading:e,disabled:i,onClick:g,children:a}),t[31]=a,t[32]=e,t[33]=i,t[34]=g,t[35]=m):m=t[35];let u;return t[36]!==y||t[37]!==de||t[38]!==We||t[39]!==p||t[40]!==m||t[41]!==G?(u=(0,n.jsxs)(No,{"data-test-id":Ut.root,children:[G,de,y,We,p,m]}),t[36]=y,t[37]=de,t[38]=We,t[39]=p,t[40]=m,t[41]=G,t[42]=u):u=t[42],u};s(91311);var Vo=s(31792);const un=(0,x.I)("div")({name:"Root",class:"rppu4xq",propsAsIs:!1}),To=(0,x.I)("div")({name:"SpinnerContainer",class:"sdcldr1",propsAsIs:!1}),Uo=(0,x.I)("div")({name:"Title",class:"th8n9fi",propsAsIs:!1}),jo=(0,x.I)("div")({name:"SubTitle",class:"san31iw",propsAsIs:!1}),Ro=()=>ht.F,Po=(0,x.I)(Ro())({name:"StyledAlert",class:"s1xjrjjh",propsAsIs:!0}),mn={error:"LinkAccount.Error",link:"LinkAccount.Link"},Do=o=>{const t=(0,O.c)(29),{onLink:a,showSpinner:r}=o,{formatMessage:l}=(0,Z.tz)(),[C,y]=(0,b.useState)(),[I,V]=(0,b.useState)(!1);let v;t[0]!==a?(v=async()=>{y(void 0),V(!0);const G=await a();V(!1),G.fold(Fo,B=>y(B.message))},t[0]=a,t[1]=v):v=t[1];const E=v;if(r){let G;return t[2]===Symbol.for("react.memo_cache_sentinel")?(G=(0,n.jsx)(un,{children:(0,n.jsx)(To,{children:(0,n.jsx)(Vo.y,{size:"large"})})}),t[2]=G):G=t[2],G}let U;t[3]===Symbol.for("react.memo_cache_sentinel")?(U=(0,n.jsx)(zt.f,{aspectRatio:"3/2",src:Ht.L.wide.existingAccount}),t[3]=U):U=t[3];let $;t[4]!==l?($=l({id:"auth.link.title"}),t[4]=l,t[5]=$):$=t[5];let le;t[6]!==$?(le=(0,n.jsx)(Uo,{children:$}),t[6]=$,t[7]=le):le=t[7];let z;t[8]!==l?(z=l({id:"auth.link.description"}),t[8]=l,t[9]=z):z=t[9];let X;t[10]!==z?(X=(0,n.jsx)(jo,{children:z}),t[10]=z,t[11]=X):X=t[11];let re;t[12]!==C?(re=C!==void 0&&(0,n.jsx)(kt.P.div,{initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},children:(0,n.jsx)(Po,{variant:"error","data-test-id":mn.error,children:C})}),t[12]=C,t[13]=re):re=t[13];let q;t[14]!==re?(q=(0,n.jsx)(Ct.N,{children:re}),t[14]=re,t[15]=q):q=t[15];let F;t[16]!==E?(F=()=>{E()},t[16]=E,t[17]=F):F=t[17];let ee;t[18]!==l?(ee=l({id:"auth.link.link-button"}),t[18]=l,t[19]=ee):ee=t[19];let ie;t[20]!==I||t[21]!==ee||t[22]!==F?(ie=(0,n.jsx)(Pe.$n,{size:"large",variant:"secondary",type:"button","data-test-id":mn.link,loading:I,disabled:I,onClick:F,children:ee}),t[20]=I,t[21]=ee,t[22]=F,t[23]=ie):ie=t[23];let ae;return t[24]!==ie||t[25]!==le||t[26]!==X||t[27]!==q?(ae=(0,n.jsxs)(un,{children:[U,le,X,q,ie]}),t[24]=ie,t[25]=le,t[26]=X,t[27]=q,t[28]=ae):ae=t[28],ae};s(41283);function Fo(){}var Oo=s(9517),Bo=s(127),Wo=s(19923),zo=s(43852),$o=s(15182);const Et={root:"MarketingConsents",yesButton:"MarketingConsents.YesButton",noButton:"MarketingConsents.NoButton",consent:o=>`MarketingConsents.Consent-${o}`,consentLink:o=>`MarketingConsents.ConsentLink-${o}`,submitError:"MarketingConsents.SubmitError"},_o=(0,x.I)("div")({name:"Root",class:"rf6yb0l",propsAsIs:!1}),Ho=(0,x.I)("h2")({name:"Title",class:"tzqsly2",propsAsIs:!1}),Ko=(0,x.I)("div")({name:"Description",class:"d1t11xv9",propsAsIs:!1}),Go=(0,x.I)("div")({name:"Consents",class:"c127pl5g",propsAsIs:!1}),Qo=(0,x.I)("div")({name:"Consent",class:"cw9ptto",propsAsIs:!1}),Yo=(0,x.I)("div")({name:"ConsentText",class:"cmlu0vp",propsAsIs:!1}),Jo=(0,x.I)("a")({name:"HelpLink",class:"hk75wr3",propsAsIs:!1}),Zo=(0,x.I)("div")({name:"ConsentSwitch",class:"c1ep2n7j",propsAsIs:!1}),Xo=(0,x.I)("div")({name:"ImageWrapper",class:"i1d0shw1",propsAsIs:!1}),qo=(0,x.I)("div")({name:"Buttons",class:"b1we8kxo",propsAsIs:!1}),ei=o=>{let{consents:t,country:a,isVisible:r,onSubmit:l,recaptcha:C,submitError:y,submitState:I}=o;const[V,v]=(0,b.useState)(()=>t.map(q=>{let{defaultValue:F,id:ee}=q;return{id:ee,value:F}})),E=I==="no-clicked",U=I==="yes-clicked",$=E||U,le=V.every(q=>{let{value:F}=q;return!F}),z=(0,b.useRef)(void 0),X=z.current;(0,b.useEffect)(()=>()=>{X&&clearTimeout(X)},[X]),(0,dt.B)(r?{name:"promoConsentsView",properties:{country:a}}:void 0);const re=(q,F)=>{te.Ep.promoConsentsDataConsents({country:a,promoConsentGiven:Object.fromEntries(F.flatMap(ee=>{let{id:ie,value:ae}=ee;const G=t.find(B=>B.id===ie)?.slug;return G!==void 0?[[G,Number(ae)]]:[]}))}),l(q,F)};return(0,n.jsxs)(_o,{"data-test-id":Et.root,children:[(0,n.jsx)(Ho,{children:(0,n.jsx)(Z.sA,{id:"auth.marketing-consents.title"})}),(0,n.jsx)(Ko,{children:(0,n.jsx)(Z.sA,{id:"auth.marketing-consents.description"})}),C,(0,n.jsx)(Go,{children:t.map(q=>{let{id:F,link:ee,slug:ie,text:ae}=q;return(0,n.jsxs)(Qo,{children:[(0,n.jsxs)(Yo,{children:[ae,ee!==null&&(0,n.jsx)(Jo,{"data-test-id":Et.consentLink(F),href:ee.url,target:"_blank",rel:"noopener noreferrer",onClick:()=>{te.Ep.promoConsentsInteractionReadTerms({country:a,legalTerms:ie})},children:(0,n.jsx)(Oo.I,{source:Bo.small,"aria-label":ee.ariaLabel,fill:Wo.Tj.wolt100})})]}),(0,n.jsx)(Zo,{children:(0,n.jsx)(zo.d,{checked:V.find(G=>G.id===F)?.value,inputDataTestId:Et.consent(F),onChange:G=>v(B=>B.map(de=>de.id===F?{id:F,value:G}:de))})})]},F)})}),(0,n.jsx)(Xo,{children:(0,n.jsx)($o._,{src:`${$e._K.IMAGE_PROXY_URL}/static-assets/onboarding/marketing-consents/yuho_big_deal_1.png`})}),(0,n.jsxs)(qo,{children:[(0,n.jsx)(Ct.N,{children:y!==null&&(0,n.jsx)(kt.P.div,{initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},children:(0,n.jsx)(ht.F,{variant:"error","data-test-id":Et.submitError,children:y})})}),(0,n.jsx)(Pe.$n,{loading:E,disabled:$,"data-test-id":Et.noButton,onClick:()=>{if(te.Ep.promoConsentsInteractionSkipConsents({country:a}),le)re("no",V);else if(z.current===void 0){const q=V.map(F=>{let{id:ee}=F;return{id:ee,value:!1}});v(q),z.current=setTimeout(()=>{re("no",q)},200)}},size:"large",variant:"secondary",children:(0,n.jsx)(Z.sA,{id:"auth.marketing-consents.no-button"})}),(0,n.jsx)(Pe.$n,{loading:U,disabled:$,"data-test-id":Et.yesButton,onClick:()=>{re("yes",V)},size:"large",variant:"primary",children:(0,n.jsx)(Z.sA,{id:"auth.marketing-consents.save-button"})})]})]})};s(355);var ti=s(20895),ni=s(38124),wt=s(58016);const _e={apple:"MethodSelect.Apple",emailInput:"MethodSelect.EmailInput",emailOptionTitle:"MethodSelect.EmailOptionTitle",facebook:"MethodSelect.Facebook",facebookLoginStatus:"MethodSelect.FacebookLoginStatus",google:"MethodSelect.Google",line:"MethodSelect.Line",emag:"MethodSelect.Emag",email:"StepMethodSelect.NextButton",emailInputError:"MethodSelect.EmailInputError",emailLoginError:"MethodSelect.EmailLoginError",privacyPolicy:"MethodSelect.PrivacyPolicy",socialLoginErrorAlert:"MethodSelect.SocialLoginError",subTitle:"MethodSelect.SubTitle",title:"MethodSelect.Title"},oi=`${$e._K.CDN_URL}/storefront/wolt-disk-logo.svg`,ii=(0,x.I)("div")({name:"Root",class:"rrygikz",propsAsIs:!1}),si=(0,x.I)("h2")({name:"Title",class:"t1wnqisj",propsAsIs:!1}),fn=(0,x.I)("div")({name:"SubTitle",class:"s84dyk8",propsAsIs:!1}),ri=(0,x.I)("div")({name:"Content",class:"c1aqqx8r",propsAsIs:!1}),ai=()=>ht.F,li=(0,x.I)(ai())({name:"SocialLoginErrorAlert",class:"sgie1qb",propsAsIs:!0}),ci=(0,x.I)("div")({name:"EmailOptionTitle",class:"e1kmcsrn",propsAsIs:!1}),di=(0,x.I)("form")({name:"EmailForm",class:"e8ztc6c",propsAsIs:!1}),ui=()=>Pe.$n,mi=(0,x.I)(ui())({name:"ContinueButton",class:"ct8ply0",propsAsIs:!0}),hn=(0,x.I)("span")({name:"PrivacyPolicySpan",class:"p1bgil23",propsAsIs:!1}),fi=()=>hn,hi=(0,x.I)(fi())({name:"PrivacyPolicySpanCenter",class:"png9tqi",propsAsIs:!0}),pi=(0,x.I)("div")({name:"WoltLogoWrapper",class:"wkziwax",propsAsIs:!1}),gi=(0,x.I)("img")({name:"WoltRoundLogo",class:"wz9m1wi",propsAsIs:!1}),Yt=o=>{const t=(0,O.c)(3),{children:a}=o;let r;t[0]===Symbol.for("react.memo_cache_sentinel")?(r={open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},t[0]=r):r=t[0];let l;return t[1]!==a?(l=(0,n.jsx)(kt.P.div,{initial:"collapsed",animate:"open",exit:"collapsed",variants:r,children:a}),t[1]=a,t[2]=l):l=t[2],l},Ci=o=>{const t=(0,O.c)(15),{methodSelectRenewalEnabled:a,privacyPolicyUrl:r}=o,{formatMessage:l}=(0,Z.tz)();if(a){let V;if(t[0]!==l||t[1]!==r){let E;t[3]!==r?(E=U=>(0,n.jsx)(Pe.gc,{href:r,target:"_blank",rel:"noopener noreferrer",size:"inherit",children:U}),t[3]=r,t[4]=E):E=t[4],V=l({id:"legal.privacy-statement-short"},{a:E}),t[0]=l,t[1]=r,t[2]=V}else V=t[2];let v;return t[5]!==V?(v=(0,n.jsx)(hi,{"data-test-id":_e.privacyPolicy,children:V}),t[5]=V,t[6]=v):v=t[6],v}let C;t[7]!==l||t[8]!==r?(C=l({id:"legal.privacy-statement"},{a:()=>(0,n.jsx)(Pe.gc,{href:r,target:"_blank",rel:"noopener noreferrer",size:"inherit",children:l({id:"courier-signup.wolt-privacy-statement"})})}),t[7]=l,t[8]=r,t[9]=C):C=t[9];let y;t[10]!==l?(y=l({id:"auth.method-select.hcaptcha-brand"},{a_pp:Ai,a_tos:ki}),t[10]=l,t[11]=y):y=t[11];let I;return t[12]!==C||t[13]!==y?(I=(0,n.jsxs)(hn,{"data-test-id":_e.privacyPolicy,children:[C," ",y]}),t[12]=C,t[13]=y,t[14]=I):I=t[14],I},yi=o=>{const t=(0,O.c)(21),{isAppleLoading:a,isFacebookLoading:r,onAppleLogin:l,onFacebookLogin:C,onGoogleLogin:y,onLineLogin:I,onEmagLogin:V,variant:v}=o,{formatMessage:E}=(0,Z.tz)();switch(v){case"emag":{let U;return t[0]!==E||t[1]!==V||t[2]!==v?(U=V?(0,n.jsx)(wt.n,{variant:v,"data-test-id":_e.emag,loading:!1,disabled:!1,onClick:V,children:E({id:"auth.method-select.emag-button"})}):null,t[0]=E,t[1]=V,t[2]=v,t[3]=U):U=t[3],U}case"apple":{let U;return t[4]!==E||t[5]!==a||t[6]!==l||t[7]!==v?(U=l?(0,n.jsx)(wt.n,{variant:v,"data-test-id":_e.apple,loading:a,disabled:a,onClick:l,children:E({id:"auth.method-select.apple-button"})}):null,t[4]=E,t[5]=a,t[6]=l,t[7]=v,t[8]=U):U=t[8],U}case"facebook-primary":case"facebook-secondary":{let U;return t[9]!==E||t[10]!==r||t[11]!==C||t[12]!==v?(U=C?(0,n.jsx)(wt.n,{variant:v,loading:r,disabled:r,"data-test-id":_e.facebook,onClick:C,children:E({id:"auth.method-select.facebook-button"})}):null,t[9]=E,t[10]=r,t[11]=C,t[12]=v,t[13]=U):U=t[13],U}case"google-border":case"google-primary":case"google-secondary":{let U;return t[14]!==E||t[15]!==y||t[16]!==v?(U=y?(0,n.jsx)(wt.n,{variant:v,"data-test-id":_e.google,onClick:y,children:E({id:"auth.method-select.google-button"})}):null,t[14]=E,t[15]=y,t[16]=v,t[17]=U):U=t[17],U}case"line":{let U;return t[18]!==E||t[19]!==I?(U=I?(0,n.jsx)(wt.n,{variant:"line","data-test-id":_e.line,onClick:I,children:E({id:"auth.method-select.line-button"})}):null,t[18]=E,t[19]=I,t[20]=U):U=t[20],U}default:return null}},bi=o=>o==="v2"?["apple","line","google-secondary","facebook-secondary","emag"]:o==="v2-prominent-google"?["apple","line","facebook-secondary","google-primary","emag"]:["emag","google-border","apple","facebook-primary","line"],Si=o=>{const t=(0,O.c)(6),{subTitle:a,customSubtitle:r,hideSubtitle:l,methodSelectRenewalEnabled:C}=o;if(l===!0)return null;if(!(0,bt.isEmpty)(r)){let y;t[0]!==r?(y=ti.A.sanitize(ni.xI.parse(r??"")),t[0]=r,t[1]=y):y=t[1];let I;return t[2]!==y?(I=(0,n.jsx)(fn,{"data-test-id":_e.subTitle,dangerouslySetInnerHTML:{__html:y}}),t[2]=y,t[3]=I):I=t[3],I}if(!(0,bt.isEmpty)(a)&&C===!1){let y;return t[4]!==a?(y=(0,n.jsx)(fn,{"data-test-id":_e.subTitle,children:a}),t[4]=a,t[5]=y):y=t[5],y}return null},vi=o=>{"use no memo";let{emailLoginError:t,isAppleLoading:a,isFacebookLoading:r,isSendingMagicEmail:l,onAppleLogin:C,onEmailLogin:y,onFacebookLogin:I,onGoogleLogin:V,onLineLogin:v,onEmagLogin:E,privacyPolicyUrl:U,recaptcha:$,socialLoginError:le,subTitle:z,title:X,prompt:re,hideSubtitle:q,showWoltLogo:F,variant:ee,customSubtitle:ie}=o;const ae=(0,Z.tz)(),{formatMessage:G}=ae,B=ee!=="v1",{formState:{errors:de,isDirty:be,touchedFields:We},handleSubmit:p,register:e}=(0,_t.g)({defaultValues:{email:""}}),i=(0,b.useCallback)(m=>(0,Mt.B9)(m)?!0:G({id:"auth.method-select.error-invalid-email"}),[G]),g=bi(ee);return(0,n.jsxs)(ii,{children:[!!F&&(0,n.jsx)(pi,{children:(0,n.jsx)(gi,{src:oi})}),(0,n.jsx)(si,{"data-test-id":_e.title,children:X}),(0,n.jsx)(Si,{subTitle:z,customSubtitle:ie,hideSubtitle:q,methodSelectRenewalEnabled:B}),re,(0,n.jsxs)(ri,{children:[$,(0,n.jsx)(Ct.N,{children:le!==void 0&&(0,n.jsx)(Yt,{children:(0,n.jsx)(li,{variant:"error","data-test-id":_e.socialLoginErrorAlert,children:le})})}),g.map(m=>(0,n.jsx)(yi,{variant:m,isAppleLoading:a,isFacebookLoading:r,onAppleLogin:C,onFacebookLogin:I,onGoogleLogin:V,onLineLogin:v,onEmagLogin:E},m)),y!==void 0&&(0,n.jsxs)(n.Fragment,{children:[(C!==void 0||I!==void 0||V!==void 0||v!==void 0)&&(0,n.jsxs)(ci,{"data-test-id":_e.emailOptionTitle,children:[(0,n.jsx)("hr",{"aria-hidden":!0}),(0,n.jsx)("span",{children:G({id:"auth.method-select.continue-email"})}),(0,n.jsx)("hr",{"aria-hidden":!0})]}),(0,n.jsxs)(di,{"aria-labelledby":"step-method-select-email-title",onSubmit:m=>{p(u=>{let{email:d}=u;return y(d)})(m)},children:[(0,n.jsx)(Lt.O,{errorMessage:de.email?.message,errorMessageTestId:_e.emailInputError,children:(0,n.jsx)(gt.pd,{id:"method-select-email",label:G(B?{id:"auth.method-select.enter-your-email-placeholder"}:{id:"auth.method-select.email-placeholder"}),"data-test-id":_e.emailInput,type:"email",...e("email",{validate:i})})}),(0,n.jsx)(Ct.N,{children:t!==void 0&&(0,n.jsx)(Yt,{children:(0,n.jsx)(ht.F,{variant:"error","data-test-id":_e.emailLoginError,children:t})})}),(0,n.jsx)(Ct.N,{children:(!B||be||We.email===!0)&&(0,n.jsx)(Yt,{children:(0,n.jsx)(mi,{size:"large",variant:"primary",type:"submit","data-test-id":_e.email,loading:l,disabled:l,children:G(B?{id:"auth.method-select.continue"}:{id:"auth.method-select.next-button"})})})})]})]}),(0,n.jsx)(Ci,{methodSelectRenewalEnabled:B,privacyPolicyUrl:U})]})]})};s(15235);function Ai(o){return(0,n.jsx)(Pe.gc,{href:"https://hcaptcha.com/privacy",target:"_blank",rel:"noreferrer",size:"inherit",children:o})}function ki(o){return(0,n.jsx)(Pe.gc,{href:"https://hcaptcha.com/terms",target:"_blank",rel:"noreferrer",size:"inherit",children:o})}var Ei=s(36610),wi=s(33498);const It={migrate:"MigrateAccount.Migrate",skip:"MigrateAccount.Skip",error:"MigrateAccount.Error",privacyPolicyLink:"MigrateAccount.PrivacyPolicyLink",termsOfServiceLink:"MigrateAccount.TermsOfServiceLink"},pn=(0,x.I)("div")({name:"Root",class:"rwkh92n",propsAsIs:!1}),Ni=(0,x.I)("h2")({name:"Title",class:"t143o6c0",propsAsIs:!1}),Li=(0,x.I)("div")({name:"SubTitle",class:"s1ezl1v9",propsAsIs:!1}),Mi=(0,x.I)("div")({name:"LegalStatement",class:"lwzli0o",propsAsIs:!1}),Ii=()=>Pe.$n,gn=(0,x.I)(Ii())({name:"StyledBtn",class:"s1472559",propsAsIs:!0}),xi=(0,x.I)("div")({name:"SpinnerContainer",class:"slmnl8q",propsAsIs:!1}),Vi=o=>{const t=(0,O.c)(43),{submitError:a,migrateAccountData:r,onSkip:l,onMigrate:C}=o,{formatMessage:y}=(0,Z.tz)(),[I,V]=(0,b.useState)(!1);let v;t[0]!==C?(v=async()=>{V(!0),await C(),V(!1)},t[0]=C,t[1]=v):v=t[1];const E=v;if(!r){let B;return t[2]===Symbol.for("react.memo_cache_sentinel")?(B=(0,n.jsx)(pn,{children:(0,n.jsx)(xi,{children:(0,n.jsx)(Ei.y,{size:"large"})})}),t[2]=B):B=t[2],B}let U;t[3]!==r.title?(U=(0,n.jsx)(Ni,{children:r.title}),t[3]=r.title,t[4]=U):U=t[4];let $;t[5]!==r.description?($=(0,n.jsx)(Li,{children:r.description}),t[5]=r.description,t[6]=$):$=t[6];let le;t[7]===Symbol.for("react.memo_cache_sentinel")?(le={aspectRatio:"10/6"},t[7]=le):le=t[7];let z;t[8]!==r.imageBlurhash||t[9]!==r.imageSrc?(z=(0,n.jsx)(wi.g,{blurhash:r.imageBlurhash,imageUrl:r.imageSrc,style:le}),t[8]=r.imageBlurhash,t[9]=r.imageSrc,t[10]=z):z=t[10];let X;t[11]!==y?(X=y({id:"auth.migrate.skip-button"}),t[11]=y,t[12]=X):X=t[12];let re;t[13]!==I||t[14]!==l||t[15]!==X?(re=(0,n.jsx)(gn,{size:"large",variant:"secondary",type:"button","data-test-id":It.skip,loading:I,disabled:I,onClick:l,children:X}),t[13]=I,t[14]=l,t[15]=X,t[16]=re):re=t[16];let q;t[17]!==y?(q=y({id:"auth.migrate.migrate-button"}),t[17]=y,t[18]=q):q=t[18];let F;t[19]!==E||t[20]!==I||t[21]!==q?(F=(0,n.jsx)(gn,{size:"large",variant:"primary",type:"button","data-test-id":It.migrate,loading:I,disabled:I,onClick:E,children:q}),t[19]=E,t[20]=I,t[21]=q,t[22]=F):F=t[22];let ee;if(t[23]!==y||t[24]!==r.privacyLink||t[25]!==r.termsLink){let B;t[27]!==r.termsLink?(B=be=>(0,n.jsx)(Pe.gc,{href:r?.termsLink,"data-test-id":It.termsOfServiceLink,target:"_blank",rel:"noreferrer",size:"inherit",children:be}),t[27]=r.termsLink,t[28]=B):B=t[28];let de;t[29]!==r.privacyLink?(de=be=>(0,n.jsx)(Pe.gc,{href:r?.privacyLink,"data-test-id":It.privacyPolicyLink,target:"_blank",rel:"noreferrer",size:"inherit",children:be}),t[29]=r.privacyLink,t[30]=de):de=t[30],ee=y({id:"auth.create-account.legal-statement"},{a_pp:B,a_tos:de}),t[23]=y,t[24]=r.privacyLink,t[25]=r.termsLink,t[26]=ee}else ee=t[26];let ie;t[31]!==ee?(ie=(0,n.jsx)(Mi,{children:ee}),t[31]=ee,t[32]=ie):ie=t[32];let ae;t[33]!==a?(ae=a!==void 0&&(0,n.jsx)(ht.F,{variant:"error","data-test-id":It.error,children:a}),t[33]=a,t[34]=ae):ae=t[34];let G;return t[35]!==ie||t[36]!==ae||t[37]!==U||t[38]!==$||t[39]!==z||t[40]!==re||t[41]!==F?(G=(0,n.jsxs)(pn,{children:[U,$,z,re,F,ie,ae]}),t[35]=ie,t[36]=ae,t[37]=U,t[38]=$,t[39]=z,t[40]=re,t[41]=F,t[42]=G):G=t[42],G};s(89309);const Ti=(0,x.I)("div")({name:"AnimationWrapper",class:"asysb3w",propsAsIs:!1}),Ui=(0,x.I)("div")({name:"AnimationContainer",class:"aaizm3u",propsAsIs:!1}),ji=()=>zt.f,Ri=(0,x.I)(ji())({name:"StyledLottiePlayer",class:"s1n20o1i",propsAsIs:!0}),Pi=(0,x.I)("h2")({name:"Title",class:"tsev6yf",propsAsIs:!1}),Di=(0,x.I)("div")({name:"Body",class:"b1i8mwgi",propsAsIs:!1}),Fi={title:"PhoneNumberInUse.Title"},Oi=o=>{const t=(0,O.c)(16),{bodyText:a,isVisible:r,titleText:l}=o,{formatMessage:C}=(0,Z.tz)();let y;t[0]!==r?(y=r?{name:"phoneNumberInUseView"}:void 0,t[0]=r,t[1]=y):y=t[1],(0,dt.B)(y);let I;t[2]===Symbol.for("react.memo_cache_sentinel")?(I=(0,n.jsx)(Ti,{children:(0,n.jsx)(Ui,{children:(0,n.jsx)(Ri,{aspectRatio:"3/2",src:Ht.L.wide.girlGasp})})}),t[2]=I):I=t[2];let V;t[3]!==C||t[4]!==l?(V=l??C({id:"errors.catchall-header"}),t[3]=C,t[4]=l,t[5]=V):V=t[5];let v;t[6]!==V?(v=(0,n.jsx)(Pi,{"data-test-id":Fi.title,children:V}),t[6]=V,t[7]=v):v=t[7];let E;t[8]!==a||t[9]!==C?(E=a??C({id:"errors.catchall-message"}),t[8]=a,t[9]=C,t[10]=E):E=t[10];let U;t[11]!==E?(U=(0,n.jsx)(Di,{children:E}),t[11]=E,t[12]=U):U=t[12];let $;return t[13]!==v||t[14]!==U?($=(0,n.jsxs)(n.Fragment,{children:[I,v,U]}),t[13]=v,t[14]=U,t[15]=$):$=t[15],$};s(35107);var Jt=s(28048),Bi=s(37556),Cn=s(82338);const Zt={title:"VerifyPhoneNumberMethodSelect.Title",smsButton:"VerifyPhoneNumberMethodSelect.SmsButton",whatsappButton:"VerifyPhoneNumberMethodSelect.whatsappButton"},Wi=(0,x.I)("div")({name:"Root",class:"r1jvbu3m",propsAsIs:!1}),zi=(0,x.I)("h2")({name:"Title",class:"tjb06ko",propsAsIs:!1}),$i=(0,x.I)("div")({name:"SubTitle",class:"s1uyhlmb",propsAsIs:!1}),_i=()=>Pe.QW,Hi=(0,x.I)(_i())({name:"ChangePhoneNumberButton",class:"c1b5b8g8",propsAsIs:!0}),Ki=(0,x.I)("div")({name:"DividerRoot",class:"d3svt3l",propsAsIs:!1}),Gi=o=>{const t=(0,O.c)(8),{formatMessage:a}=o;let r;t[0]===Symbol.for("react.memo_cache_sentinel")?(r=(0,n.jsx)("hr",{}),t[0]=r):r=t[0];let l;t[1]!==a?(l=a({id:"auth.verify-method-select.or"}),t[1]=a,t[2]=l):l=t[2];let C;t[3]!==l?(C=(0,n.jsx)("span",{children:l}),t[3]=l,t[4]=C):C=t[4];let y;t[5]===Symbol.for("react.memo_cache_sentinel")?(y=(0,n.jsx)("hr",{}),t[5]=y):y=t[5];let I;return t[6]!==C?(I=(0,n.jsxs)(Ki,{children:[r,C,y]}),t[6]=C,t[7]=I):I=t[7],I},Qi=o=>{const t=(0,O.c)(64),{onSendBySms:a,onSendByWhatsApp:r,phoneNumber:l,recaptcha:C,submitError:y,isSendingSms:I,isSendingWhatsapp:V,smsSendAgainCooldownSeconds:v,whatsappSendAgainCooldownSeconds:E,onChangePhoneNumber:U,onCountdownDone:$,verificationMethods:le}=o,{formatMessage:z}=(0,Z.tz)(),X=I||V,re=b.useRef(!1),q=b.useRef(!1);let F;t[0]===Symbol.for("react.memo_cache_sentinel")?(F=()=>{re.current=!1,q.current=!1},t[0]=F):F=t[0];let ee;t[1]!==v||t[2]!==E?(ee=[v,E],t[1]=v,t[2]=E,t[3]=ee):ee=t[3],(0,b.useEffect)(F,ee);let ie;t[4]!==$?(ie=()=>{re.current=!1,$()},t[4]=$,t[5]=ie):ie=t[5];const{displaySeconds:ae,startCountdown:G}=(0,Cn.L)(v?.time??0,ie);let B;t[6]!==$?(B=()=>{q.current=!1,$()},t[6]=$,t[7]=B):B=t[7];const{displaySeconds:de,startCountdown:be}=(0,Cn.L)(E?.time??0,B);let We;t[8]!==v?.time||t[9]!==G?(We=()=>{v?.time!==void 0&&!re.current&&(G(),re.current=!0)},t[8]=v?.time,t[9]=G,t[10]=We):We=t[10];let p;t[11]!==v||t[12]!==G?(p=[v,G,re],t[11]=v,t[12]=G,t[13]=p):p=t[13],(0,b.useEffect)(We,p);let e;t[14]!==be||t[15]!==E?.time?(e=()=>{E?.time!==void 0&&!q.current&&(be(),q.current=!0)},t[14]=be,t[15]=E?.time,t[16]=e):e=t[16];let i;t[17]!==be||t[18]!==E?(i=[E,be,q],t[17]=be,t[18]=E,t[19]=i):i=t[19],(0,b.useEffect)(e,i);let g;t[20]!==z?(g=z({id:"auth.verify-method-select.title"}),t[20]=z,t[21]=g):g=t[21];let m;t[22]!==g?(m=(0,n.jsx)(zi,{"data-test-id":Zt.title,children:g}),t[22]=g,t[23]=m):m=t[23];let u;if(t[24]!==z||t[25]!==l){let k;t[27]!==l?(k=(0,n.jsx)("strong",{children:l}),t[27]=l,t[28]=k):k=t[28],u=z({id:"auth.verify-method-select.description"},{phoneNumber:k}),t[24]=z,t[25]=l,t[26]=u}else u=t[26];let d;t[29]!==u?(d=(0,n.jsx)($i,{children:u}),t[29]=u,t[30]=d):d=t[30];let L;t[31]!==z?(L=z({id:"auth.change-phone-number.title"}),t[31]=z,t[32]=L):L=t[32];let S;t[33]!==U||t[34]!==L?(S=(0,n.jsx)(Hi,{size:"large",onClick:U,children:L}),t[33]=U,t[34]=L,t[35]=S):S=t[35];let f;t[36]!==z||t[37]!==I||t[38]!==a||t[39]!==X||t[40]!==ae||t[41]!==le?(f=le?.includes("sms")&&(0,n.jsx)(Pe.$n,{variant:"primary",size:"large",icon:Bi,"data-test-id":Zt.smsButton,onClick:a,disabled:X||ae!==null,loading:I,children:z({id:(ae??0)>0?"auth.code-not-received.send-sms-cooldown":"auth.verify-method-select.send-sms"},{seconds:ae})}),t[36]=z,t[37]=I,t[38]=a,t[39]=X,t[40]=ae,t[41]=le,t[42]=f):f=t[42];let w;t[43]!==z||t[44]!==le?.length?(w=le?.length>1&&(0,n.jsx)(Gi,{formatMessage:z}),t[43]=z,t[44]=le?.length,t[45]=w):w=t[45];let A;t[46]!==z||t[47]!==V||t[48]!==r||t[49]!==X||t[50]!==le||t[51]!==de?(A=le?.includes("whatsapp")&&(0,n.jsx)(wt.n,{variant:"whatsapp-primary",onClick:r,iconPosition:"middle",iconSize:"medium","data-test-id":Zt.whatsappButton,disabled:X||de!==null,loading:V,children:z({id:(de??0)>0?"auth.code-not-received.send-whatsapp-cooldown":"auth.verify-method-select.send-whatsapp"},{seconds:de})}),t[46]=z,t[47]=V,t[48]=r,t[49]=X,t[50]=le,t[51]=de,t[52]=A):A=t[52];let h;t[53]!==y?(h=y!==void 0&&(0,n.jsx)(ht.F,{variant:"error",children:y}),t[53]=y,t[54]=h):h=t[54];let c;return t[55]!==C||t[56]!==m||t[57]!==d||t[58]!==S||t[59]!==f||t[60]!==w||t[61]!==A||t[62]!==h?(c=(0,n.jsxs)(Wi,{children:[m,d,S,f,w,A,C,h]}),t[55]=C,t[56]=m,t[57]=d,t[58]=S,t[59]=f,t[60]=w,t[61]=A,t[62]=h,t[63]=c):c=t[63],c};s(87403);var Yi=s(98608),Ji=s(91738);const Zi="https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/en_US/appleid.auth.js",Xi=()=>{const o=(0,O.c)(3),t=(0,b.useRef)(!0);let a,r;o[0]===Symbol.for("react.memo_cache_sentinel")?(a=()=>()=>{t.current=!1},r=[],o[0]=a,o[1]=r):(a=o[0],r=o[1]),(0,b.useEffect)(a,r);let l;return o[2]===Symbol.for("react.memo_cache_sentinel")?(l=()=>t.current,o[2]=l):l=o[2],l},qi=async o=>{if(window.AppleID===void 0)throw new Error("Apple not initialized");await new Promise(y=>setTimeout(y,200));const{authorization:{code:t,id_token:a},user:r}=await window.AppleID.auth.signIn(),{email:l}=(0,Yi.s)(a),C={appleAuthCode:t,appleIdToken:a,email:l,firstName:r?.name?.firstName,lastName:r?.name?.lastName};try{return await o({audience:"wolt-com",authorizationCode:t,grantType:"apple_authorization_code",identityToken:a}),K.w.of({status:"success"})}catch(y){if((0,Re.F0)(y)){const I=y.response?.data;return I?.error_code===148?K.w.of({status:"signupRequired",values:C}):K.H.of({error:I?.msg??y.message,errorCode:void 0})}return K.H.of({error:y.message,errorCode:(0,Re.F0)(y)?y?.response?.data?.error_code:void 0})}},es=()=>{const o=Xi(),{login:t}=(0,Ie.BG)(),[a,r]=(0,b.useState)(!0),l=(0,b.useCallback)(()=>{let y=0;const I=()=>{if(window.AppleID===void 0){y<=3&&(setTimeout(I,y*200),y+=1);return}window.AppleID.auth.init({clientId:$e._K.APPLE_CLIENT_ID,redirectURI:$e._K.APPLE_REDIRECT_URI,scope:"name email",usePopup:!0}),o()&&r(!1)};I()},[r,o]);return(0,Ji.K)({src:Zi,onLoad:l}),{login:(0,b.useCallback)(async()=>{r(!0);try{return await qi(t)}catch(y){return K.H.of({error:y.message,errorCode:void 0})}finally{r(!1)}},[t]),isLoading:a}},ts=o=>{const t=document.createElement("script");t.src=o;const a=document.getElementsByTagName("head")[0];a&&a.appendChild(t)};let jt;const ns=()=>jt||(jt=new Promise(o=>{if(window.FB?.woltInitialized){o();return}window.fbAsyncInit=()=>{window.FB.init({appId:$e._K.FB_APP_ID,version:"v4.0"}),window.FB.woltInitialized=!0,o()},ts("https://connect.facebook.net/en_US/sdk.js")}),jt),os=(o,t)=>new Promise(a=>{FB.api(o,t,a)}),is=()=>new Promise(o=>FB.getLoginStatus(o)),ss=o=>new Promise(t=>FB.login(t,o)),rs=async()=>{const o=await is();return o.authResponse?.accessToken!==void 0?o.authResponse.accessToken:(await ss({scope:"email"})).authResponse?.accessToken},as=o=>{const t=o?o.split(" "):[""],a=t[0]??"",r=t.slice(-1)[0]??"";return[a,r]},ls=async o=>{if(await ns(),!(window.FB?.woltInitialized??!1))throw new Error("Facebook not initialized");const t=await rs();if(t===void 0)throw new Error;const a=await os("/me",{fields:"id,name,email"}),[r,l]=as(a.name);try{return await o({grantType:"facebook_token",audience:"wolt-com",facebookToken:t}),K.w.of({status:"success"})}catch(C){return(0,Re.F0)(C)&&C?.response?.data?.error_code===123?K.w.of({status:"signupRequired",values:{email:a.email,firstName:r,lastName:l,facebookToken:t}}):K.H.of({error:C.message,errorCode:(0,Re.F0)(C)?C?.response?.data?.error_code:void 0})}},cs=()=>{const{login:o}=(0,Ie.BG)(),[t,a]=(0,b.useState)(!1);return{login:(0,b.useCallback)(async()=>{a(!0);try{return await ls(o)}catch(l){return K.H.of({error:l.message,errorCode:void 0})}finally{a(!1)}},[o]),isLoading:t}},yn=(o,t)=>{if(t===void 0||(0,bt.isEmpty)(t))return["sms"];const{countryCode:a}=(0,ut.lq)(o);return(a!==void 0?t.country_codes[a.toString()]:null)??t.default},xt=$e._K.APP_ENV==="local"?1e3:3e4,bn=$e._K.APP_ENV==="local"?1e3:6e4,Sn=(o,t)=>{const{formatMessage:a}=o;switch(t){case"login":return{title:a({id:"auth.method-select.login-title"}),subTitle:void 0};case"signup":return{title:a({id:"auth.method-select.signup-title"}),subTitle:void 0};case"signupOrLogin":return{title:a({id:"auth.method-select.title"}),subTitle:a({id:"auth.method-select.desktop-description"})}}},Ge=(0,x.I)("div")({name:"ScreenWrapper",class:"s191o1xp",propsAsIs:!1}),St="AuthModal.recaptcha",Xt=o=>{const t=(0,O.c)(4),{formatMessage:a}=(0,Z.tz)();switch(o){case"error":{let r;return t[0]!==a?(r=a({id:"auth.method-select.hcaptcha-error"}),t[0]=a,t[1]=r):r=t[1],r}case"expired":{let r;return t[2]!==a?(r=a({id:"auth.method-select.hcaptcha-expired"}),t[2]=a,t[3]=r):r=t[3],r}default:return}},ds=o=>{let{createModalNavigationStack:t=rt.g,useAppleLogin:a=es,useFacebookLogin:r=cs,useRecaptcha:l=On.V,useCreateAccountConsents:C,useMarketingConsents:y,Modal:I=et.a,useUserCountry:V,useLocalStorageJsonDecoded:v}=o;const be=t({index:{title:p=>{let{intl:e,flow:i}=p;return Sn(e,i).title},titleVisibility:"onScroll",screen:p=>{const e=(0,O.c)(68),{authMethods:i,flow:g,intl:m,initialSocialLoginError:u,navigation:d,onAppleLogin:L,onChangeAuthState:S,onCheckIfLinkableExistingAccount:f,onClose:w,onFacebookLogin:A,onGoogleLogin:h,onLineLogin:c,onEmagLogin:k,onSendMagicEmail:N,privacyPolicyUrl:M,isVisible:R,prompt:j,hideSubtitle:D,showWoltLogo:H,methodSelectVariant:W,onMethodSelectRenewalExposure:J,customSubtitle:_}=p,Q=(0,Tt.yl)(),{formatMessage:ne}=m,[,fe]=v("hasActiveMagicLink",T.boolean),[De,Te]=(0,b.useState)(),[Ue,Fe]=(0,b.useState)(!1),[Se,he]=(0,b.useState)(u),{login:Ee,isLoading:we}=a(),{login:ve,isLoading:pe}=r();let Ae;e[0]===Symbol.for("react.memo_cache_sentinel")?(Ae={country:void 0},e[0]=Ae):Ae=e[0],C(Ae);let xe;e[1]!==i||e[2]!==R?(xe=R?{name:"loginOptionsView",properties:{source:"login_options",loginOptionsList:i,guestVisitAllowed:!0,welcomeBackLoginOption:void 0,collapsedLoginOptionsList:"",visibleLoginOptionsList:""}}:void 0,e[1]=i,e[2]=R,e[3]=xe):xe=e[3],(0,dt.B)(xe);let ge,P;e[4]!==R||e[5]!==J?(ge=()=>{R&&J()},P=[R,J],e[4]=R,e[5]=J,e[6]=ge,e[7]=P):(ge=e[6],P=e[7]),(0,b.useEffect)(ge,P);const{recaptchaStatus:oe,runRecaptcha:Y}=l(St),ce=Xt(oe);let ue;e:{if(!i.includes("apple")){ue=void 0;break e}let Ce;e[8]!==Q||e[9]!==Ee||e[10]!==d||e[11]!==L||e[12]!==S||e[13]!==f||e[14]!==w||e[15]!==Y||e[16]!==fe?(Ce=async()=>{Q({type:"loginStarted",payload:{method:"apple"}}),te.Ep.loginOptionsInteractionChooseLoginMethod({loginMethod:"apple",isInCollapsedList:!1}),he(void 0),await(await Ee()).fold(async Ye=>{if(te.Ep.loginDataLoginCompleted({loginMethod:"apple",isNewUserAccount:Ye.status==="signupRequired"}),Ye.status==="success")L({success:!0}),w?.();else if(Ye.status==="signupRequired"){const{values:Oe}=Ye,ze={authCode:Oe.appleAuthCode,method:"apple",value:Oe.appleIdToken},en=await Y();(await f({authToken:ze,email:Oe.email,method:"apple",recaptchaResult:en})).fold(st=>{st.status==="linkAccount"?(S({authToken:ze,email:Oe.email,linkId:st.linkId,linkVerifyRequired:st.verifyRequired}),d.goTo("linkAccount")):st.status==="magicLinkSent"?(fe(!0),S({email:Oe.email,isNewUserAccount:!1}),d.goTo("emailSent")):st.status==="noMatchingAccount"?(S({authToken:ze,email:Oe.email,firstName:Oe.firstName,lastName:Oe.lastName}),d.goTo("createAccount")):(0,nt.d)(st)},st=>he(st.message))}},async Ye=>{const{error:Oe,errorCode:ze}=Ye;he(Oe),L({success:!1,errorCode:ze,error:Oe})})},e[8]=Q,e[9]=Ee,e[10]=d,e[11]=L,e[12]=S,e[13]=f,e[14]=w,e[15]=Y,e[16]=fe,e[17]=Ce):Ce=e[17],ue=Ce}const ke=ue;let Ve;e:{if(!i.includes("facebook")){Ve=void 0;break e}let Ce;e[18]!==Q||e[19]!==ne||e[20]!==ve||e[21]!==d||e[22]!==S||e[23]!==f||e[24]!==w||e[25]!==A||e[26]!==Y||e[27]!==fe?(Ce=async()=>(Q({type:"loginStarted",payload:{method:"facebook"}}),te.Ep.loginOptionsInteractionChooseLoginMethod({loginMethod:"facebook",isInCollapsedList:!1}),he(void 0),(await ve()).fold(async Ye=>{if(te.Ep.loginDataLoginCompleted({loginMethod:"facebook",isNewUserAccount:Ye.status==="signupRequired"}),Ye.status==="success")A({success:!0}),w?.();else if(Ye.status==="signupRequired"){const{values:Oe}=Ye,{email:ze,firstName:en,lastName:kn,facebookToken:st}=Oe;if(ze===void 0){he(ne({id:"auth.signup.error-no-email"}));return}const En={method:"facebook",value:st},Ws=await Y();(await f({authToken:En,email:ze,method:"facebook",recaptchaResult:Ws})).fold(yt=>{yt.status==="linkAccount"?(S({authToken:En,email:ze,linkId:yt.linkId,linkVerifyRequired:yt.verifyRequired}),d.goTo("linkAccount")):yt.status==="magicLinkSent"?(fe(!0),S({email:Oe.email,isNewUserAccount:!1}),d.goTo("emailSent")):yt.status==="noMatchingAccount"?(S({authToken:{method:"facebook",value:st},email:ze,firstName:en,lastName:kn}),d.goTo("createAccount")):(0,nt.d)(yt)},yt=>he(yt.message))}},async Ye=>{const{error:Oe,errorCode:ze}=Ye;he(Oe),A({success:!1,errorCode:ze,error:Oe})})),e[18]=Q,e[19]=ne,e[20]=ve,e[21]=d,e[22]=S,e[23]=f,e[24]=w,e[25]=A,e[26]=Y,e[27]=fe,e[28]=Ce):Ce=e[28],Ve=Ce}const qe=Ve;let ot;e:{if(!i.includes("google")){ot=void 0;break e}let Ce;e[29]!==Q||e[30]!==h?(Ce=()=>{Q({type:"loginStarted",payload:{method:"google"}}),te.Ep.loginOptionsInteractionChooseLoginMethod({loginMethod:"google",isInCollapsedList:!1}),h()},e[29]=Q,e[30]=h,e[31]=Ce):Ce=e[31],ot=Ce}const mt=ot;let Ne;e:{if(!i.includes("line")){Ne=void 0;break e}let Ce;e[32]!==Q||e[33]!==c?(Ce=()=>{Q({type:"loginStarted",payload:{method:"line"}}),te.Ep.loginOptionsInteractionChooseLoginMethod({loginMethod:"line",isInCollapsedList:!1}),c()},e[32]=Q,e[33]=c,e[34]=Ce):Ce=e[34],Ne=Ce}const me=Ne;let Le;e:{if(!i.includes("email")){Le=void 0;break e}let Ce;e[35]!==Q||e[36]!==d||e[37]!==S||e[38]!==N||e[39]!==Y||e[40]!==fe?(Ce=async Ft=>{Q({type:"loginStarted",payload:{method:"email"}}),te.Ep.loginOptionsInteractionChooseLoginMethod({loginMethod:"email",isInCollapsedList:!1});const Ye=await Y();Te(void 0),Fe(!0);const Oe=await N({email:Ft,recaptchaResult:Ye});Fe(!1),Oe.fold(ze=>{te.Ep.sessionEmailSubmitted({isNewUserAccount:ze.status==="magicLinkSent"?ze.isNewUserAccount:!0,isUnverifiedEmailFlow:!1}),fe(!0),S({email:Ft,isNewUserAccount:ze.isNewUserAccount}),d.goTo("emailSent")},ze=>Te(ze.message))},e[35]=Q,e[36]=d,e[37]=S,e[38]=N,e[39]=Y,e[40]=fe,e[41]=Ce):Ce=e[41],Le=Ce}const Me=Le;let He;e:{if(!i.includes("emag")){He=void 0;break e}let Ce;e[42]!==Q||e[43]!==k?(Ce=()=>{Q({type:"loginStarted",payload:{method:"emag"}}),te.Ep.loginOptionsInteractionChooseLoginMethod({loginMethod:"emag",isInCollapsedList:!1}),k()},e[42]=Q,e[43]=k,e[44]=Ce):Ce=e[44],He=Ce}const it=He,pt=De??ce,Vt=Ue||oe==="busy";let Pt;e[45]===Symbol.for("react.memo_cache_sentinel")?(Pt=(0,n.jsx)("div",{id:St}),e[45]=Pt):Pt=e[45];let Nt;e[46]!==g||e[47]!==m?(Nt=Sn(m,g),e[46]=g,e[47]=m,e[48]=Nt):Nt=e[48];let Dt;return e[49]!==_||e[50]!==ke||e[51]!==it||e[52]!==Me||e[53]!==qe||e[54]!==mt||e[55]!==me||e[56]!==D||e[57]!==we||e[58]!==pe||e[59]!==W||e[60]!==M||e[61]!==j||e[62]!==H||e[63]!==Se||e[64]!==pt||e[65]!==Vt||e[66]!==Nt?(Dt=(0,n.jsx)(Ge,{children:(0,n.jsx)(vi,{emailLoginError:pt,isAppleLoading:we,isFacebookLoading:pe,isSendingMagicEmail:Vt,onAppleLogin:ke,onFacebookLogin:qe,onGoogleLogin:mt,onLineLogin:me,onEmailLogin:Me,onEmagLogin:it,privacyPolicyUrl:M,recaptcha:Pt,socialLoginError:Se,prompt:j,hideSubtitle:D,customSubtitle:_,showWoltLogo:H,variant:W,...Nt})}),e[49]=_,e[50]=ke,e[51]=it,e[52]=Me,e[53]=qe,e[54]=mt,e[55]=me,e[56]=D,e[57]=we,e[58]=pe,e[59]=W,e[60]=M,e[61]=j,e[62]=H,e[63]=Se,e[64]=pt,e[65]=Vt,e[66]=Nt,e[67]=Dt):Dt=e[67],Dt}},emailSent:{title:p=>{let{intl:e}=p;return e.formatMessage({id:"auth.magic-email.title"})},titleVisibility:"onScroll",screen:p=>{const e=(0,O.c)(13),{authState:i,intl:g,onSendMagicEmail:m}=p,u=i?.email;if(u===void 0)throw Error("email missing");const{recaptchaStatus:d,runRecaptcha:L}=l(St),S=Xt(d);let f;e[0]!==u||e[1]!==m||e[2]!==L?(f=async()=>{const N=await L();return await m({email:u,recaptchaResult:N})},e[0]=u,e[1]=m,e[2]=L,e[3]=f):f=e[3];const w=f;let A;e[4]!==g?(A=g.formatMessage({id:"auth.magic-email.resend-button"}),e[4]=g,e[5]=A):A=e[5];let h;e[6]===Symbol.for("react.memo_cache_sentinel")?(h=(0,n.jsx)("div",{id:St}),e[6]=h):h=e[6];const c=i.isNewUserAccount??!1;let k;return e[7]!==u||e[8]!==w||e[9]!==S||e[10]!==A||e[11]!==c?(k=(0,n.jsx)(Ge,{children:(0,n.jsx)(xo,{buttonText:A,email:u,error:S,onResendEmail:w,recaptcha:h,isNewUserAccount:c})}),e[7]=u,e[8]=w,e[9]=S,e[10]=A,e[11]=c,e[12]=k):k=e[12],k}},createAccount:{isGoBackDisabled:p=>{let{authState:e}=p;return e.authToken?.method==="line"||e.authToken?.method==="google"||e.authToken?.method==="email"},title:p=>{let{intl:e}=p;return e.formatMessage({id:"auth.create-account.title"})},titleVisibility:"onScroll",screen:p=>{let{authState:e,countries:i,initialCountryData:g,isVisible:m,navigation:u,onChangeAuthState:d,onSignup:L,privacyPolicyUrl:S,referralCode:f,termsUrl:w}=p;const[{isSubmitting:A,submitError:h},c]=(0,b.useState)({isSubmitting:!1}),{recaptchaStatus:k,runWithRecaptcha:N}=l(St),{authToken:M,email:R}=e,j=M?.method==="emag",D=(0,b.useCallback)(W=>{if(M===void 0)return;(_=>M?.method==="email"?N(_):_(void 0))(async _=>{c({isSubmitting:!0}),(await L({flow:"authToken",...W,authToken:M,recaptchaResult:_,referralCode:f??W.referralCode,sendPhoneNumberVerification:!1})).fold(ne=>{if(c({isSubmitting:!1}),ne.status==="linkAccount")d({authToken:M,linkId:ne.linkId,linkVerifyRequired:ne.verifyRequired,phoneNumber:W.phoneNumber,email:j?R:void 0}),u.goTo("linkAccount");else if(ne.status==="migrateAccount")d({authToken:M,migrateAccountData:ne.migrateAccountData}),u.goTo("migrateAccount");else if(ne.status==="phoneNumberInUse")d(fe=>({...fe,phoneNumberInUseResult:{titleText:ne.titleText,bodyText:ne.bodyText}})),u.goTo("phoneNumberInUse");else if(ne.status==="magicLinkSent")u.goTo("emailSent");else{if(ne.status==="verifyPhoneNumber")return d({authToken:M,country:W.country,isNewUserAccount:ne.isNewUserAccount,phoneNumber:W.phoneNumber}),u.goTo("verifyPhoneNumberMethodSelect");ne.status==="accountCreated"?on.J.addError("Received unexpected `accountCreated` when signing up without SMS token",{method:M.method}):(0,nt.d)(ne)}},ne=>c({isSubmitting:!1,submitError:ne.message}))})},[M,N,L,f,d,j,R,u]),H=Xt(k);return(0,n.jsx)(Ge,{children:(0,n.jsx)(ko,{useConsents:C,countries:i,initialFirstName:e?.firstName,initialLastName:e?.lastName,initialPhoneNumber:e?.phoneNumber,initialCountry:g.country,initialPhoneNumberCountryCode:g.phoneNumberCountryCode,initialEmail:e?.email,isReferralCodeInputVisible:!1,isSubmitting:A||k==="busy",isVisible:m,onSubmit:D,recaptcha:(0,n.jsx)("div",{id:St}),privacyPolicyUrl:S,submitError:h??H,termsUrl:w,isSkipEmailVerification:!1,isAccountMigration:j})})}},phoneNumberInUse:{title:p=>{let{authState:e,intl:i}=p;return e.phoneNumberInUseResult?.titleText??i.formatMessage({id:"errors.catchall-header"})},titleVisibility:"onScroll",screen:p=>{const e=(0,O.c)(4),{authState:i,isVisible:g}=p,m=i.phoneNumberInUseResult?.bodyText??null,u=i.phoneNumberInUseResult?.titleText??null;let d;return e[0]!==g||e[1]!==m||e[2]!==u?(d=(0,n.jsx)(Ge,{children:(0,n.jsx)(Oi,{bodyText:m,isVisible:g,titleText:u})}),e[0]=g,e[1]=m,e[2]=u,e[3]=d):d=e[3],d}},linkAccount:{isGoBackDisabled:!0,title:p=>{let{intl:e}=p;return e.formatMessage({id:"auth.link.title"})},titleVisibility:"onScroll",screen:p=>{const e=(0,O.c)(11),{authState:i,navigation:g,onClose:m,onVerifyLinkAccount:u,onSendLinkAccountVerificationCode:d,fastAccountLinkingEnabled:L,onFastAccountLinkingExposure:S}=p,{authToken:f,linkId:w,linkVerifyRequired:A}=i;let h;e[0]!==f||e[1]!==w||e[2]!==A||e[3]!==g||e[4]!==m||e[5]!==d||e[6]!==u?(h=async()=>{if(f===void 0||w===void 0)throw new Error("authToken or linkId missing in handleOnLink");const{method:_}=f;if(_==="email")throw new Error("email not allowed in handleOnLink");if(A===!0)return g.goTo("verifyLinkAccount"),await d({method:_,linkId:w}),K.w.of("ok");{const Q=await u({authToken:f,code:void 0,method:_,linkId:w});return Q.fold(()=>m?.(),us),Q}},e[0]=f,e[1]=w,e[2]=A,e[3]=g,e[4]=m,e[5]=d,e[6]=u,e[7]=h):h=e[7];const c=h,[k,N]=(0,b.useState)(!1),M=async()=>{(await c()).fold(ms,()=>N(!0))},j=L&&A===!1,[D,H]=(0,b.useState)(!1);!D&&A!==void 0&&(j&&M(),S(),H(!0));const W=j&&!k;let J;return e[8]!==c||e[9]!==W?(J=(0,n.jsx)(Ge,{children:(0,n.jsx)(Do,{onLink:c,showSpinner:W})}),e[8]=c,e[9]=W,e[10]=J):J=e[10],J}},migrateAccount:{isGoBackDisabled:!1,title:p=>{let{authState:e,intl:i}=p;return e?.migrateAccountData?.title??i.formatMessage({id:"auth.link.title"})},titleVisibility:"onScroll",screen:p=>{const e=(0,O.c)(20),{authState:i,navigation:g,onMigrateAccount:m,onClose:u,geoIpCountryCode3:d,onChangeAuthState:L,isVisible:S}=p,[f,w]=(0,b.useState)(),{authToken:A,migrateAccountData:h}=i;let c;e[0]!==d?(c={country:d},e[0]=d,e[1]=c):c=e[1],y(c);let k;e[2]!==S?(k=S?{name:"tazzAccountTransferView"}:void 0,e[2]=S,e[3]=k):k=e[3],(0,dt.B)(k);let N;e[4]!==i||e[5]!==A||e[6]!==d||e[7]!==h||e[8]!==g||e[9]!==L||e[10]!==u||e[11]!==m?(N=async()=>{if(A===void 0||h===void 0)throw new Error("authToken or migrateAccountData missing in handleOnMigrate");if(h.consentsToShow.length)return L({...i,phoneNumberVerified:!0,country:d}),g.goTo("marketingConsents");const H=await m({authToken:A,marketingConsents:[]});te.Ep.tazzAccountTransferInteractionLinkTazzAccount(),H.fold(()=>{w(void 0),u?.()},W=>{w(W.message)})},e[4]=i,e[5]=A,e[6]=d,e[7]=h,e[8]=g,e[9]=L,e[10]=u,e[11]=m,e[12]=N):N=e[12];const M=N;let R;e[13]!==g?(R=()=>(te.Ep.tazzAccountTransferInteractionSkip(),g.goTo("createAccount")),e[13]=g,e[14]=R):R=e[14];const j=R;let D;return e[15]!==M||e[16]!==j||e[17]!==h||e[18]!==f?(D=(0,n.jsx)(Ge,{children:(0,n.jsx)(Vi,{submitError:f,migrateAccountData:h,onSkip:j,onMigrate:M})}),e[15]=M,e[16]=j,e[17]=h,e[18]=f,e[19]=D):D=e[19],D}},marketingConsents:{isGoBackDisabled:!0,title:p=>{let{intl:e}=p;return e.formatMessage({id:"auth.marketing-consents.title"})},titleVisibility:"onScroll",screen:p=>{const e=(0,O.c)(34),{authState:i,navigation:g,isVisible:m,onClose:u,onModifyUserConsents:d,onMigrateAccount:L,intl:S}=p,{phoneNumberVerified:f,migrateAccountData:w,authToken:A}=i,h=f===void 0?!1:f,c=V();let k;e[0]===Symbol.for("react.memo_cache_sentinel")?(k={isSubmitting:!1},e[0]=k):k=e[0];const[N,M]=(0,b.useState)(k),{isSubmitting:R,submitError:j}=N;let D;e[1]!==c||e[2]!==S?(D=()=>{c||(M({isSubmitting:!1,submitError:S.formatMessage({id:"auth.marketing-consents.unexpected-error"})}),on.J.addError("Country unexpectedly missing in MarketingConsentsScreen"))},e[1]=c,e[2]=S,e[3]=D):D=e[3];let H;e[4]!==c||e[5]!==S||e[6]!==j?(H=[c,S,j],e[4]=c,e[5]=S,e[6]=j,e[7]=H):H=e[7],(0,b.useEffect)(D,H);let W;e[8]!==c?(W={country:c},e[8]=c,e[9]=W):W=e[9];const J=y(W),[_,Q]=(0,b.useState)();let ne;e[10]!==J||e[11]!==w?(ne=()=>w?.consentsToShow&&J?J.filter(pe=>w.consentsToShow?.some(Ae=>pe.id===Ae.id)):J??[],e[10]=J,e[11]=w,e[12]=ne):ne=e[12];const fe=ne;let De;e[13]!==A||e[14]!==w||e[15]!==g||e[16]!==u||e[17]!==L||e[18]!==d||e[19]!==h?(De=async(pe,Ae)=>{Q(pe),w&&A&&(await L({authToken:A,marketingConsents:Ae})).fold(()=>{M({isSubmitting:!1}),u?.()},()=>{g.goTo("createAccount")}),(await d(Ae)).fold(()=>{if(M({isSubmitting:!1}),h)return u?.();g.goTo("verifyPhoneNumberMethodSelect")},ge=>M({isSubmitting:!1,submitError:ge.message}))},e[13]=A,e[14]=w,e[15]=g,e[16]=u,e[17]=L,e[18]=d,e[19]=h,e[20]=De):De=e[20];const Te=De;let Ue;e[21]!==_||e[22]!==R?(Ue=()=>R?_==="yes"?"yes-clicked":"no-clicked":"idle",e[21]=_,e[22]=R,e[23]=Ue):Ue=e[23];const Fe=Ue;if(!c)return null;let Se;e[24]!==fe?(Se=fe(),e[24]=fe,e[25]=Se):Se=e[25];let he;e[26]===Symbol.for("react.memo_cache_sentinel")?(he=(0,n.jsx)("div",{id:St}),e[26]=he):he=e[26];const Ee=j??null,we=Fe();let ve;return e[27]!==c||e[28]!==Te||e[29]!==m||e[30]!==Se||e[31]!==Ee||e[32]!==we?(ve=(0,n.jsx)(Ge,{children:(0,n.jsx)(ei,{consents:Se,country:c,isVisible:m,onSubmit:Te,recaptcha:he,submitError:Ee,submitState:we})}),e[27]=c,e[28]=Te,e[29]=m,e[30]=Se,e[31]=Ee,e[32]=we,e[33]=ve):ve=e[33],ve}},verifyLinkAccount:{isGoBackDisabled:!0,title:p=>{let{intl:e}=p;return e.formatMessage({id:"auth.verify-code.title"})},titleVisibility:"onScroll",screen:p=>{const e=(0,O.c)(26),{authState:i,intl:g,navigation:m,onClose:u,onVerifyLinkAccount:d}=p,{formatMessage:L}=g,{authToken:S,email:f,linkId:w,phoneNumber:A}=i;if(w===void 0||S===void 0)throw Error("linkId or authToken missing in VerifyLinkAccount");const{method:h}=S;if(h==="email")throw Error("email method in VerifyLinkAccount");let c;e[0]!==S||e[1]!==w||e[2]!==h||e[3]!==d?(c=async Q=>d({authToken:S,code:Q,linkId:w,method:h}),e[0]=S,e[1]=w,e[2]=h,e[3]=d,e[4]=c):c=e[4];const k=c;let N;e[5]!==u?(N=()=>u?.(),e[5]=u,e[6]=N):N=e[6];const M=N;let R;e[7]!==f||e[8]!==L||e[9]!==A?(R=()=>L(A===void 0?{id:"auth.verify-code.success-email"}:f===void 0?{id:"auth.verify-code.success-phone"}:{id:"auth.verify-code.success"}),e[7]=f,e[8]=L,e[9]=A,e[10]=R):R=e[10];const j=R,D=f!==void 0&&A!==void 0?"auth.link-verify.description-both":"auth.link-verify.description-single";let H;e[11]!==f||e[12]!==L||e[13]!==A||e[14]!==D?(H=L({id:D},{email:f,phoneNumber:A,emailOrPhoneNumber:f??A}),e[11]=f,e[12]=L,e[13]=A,e[14]=D,e[15]=H):H=e[15];let W;e[16]!==m?(W=()=>m.goTo("verifyLinkAccountCodeNotReceived"),e[16]=m,e[17]=W):W=e[17];let J;e[18]!==j?(J=j(),e[18]=j,e[19]=J):J=e[19];let _;return e[20]!==k||e[21]!==M||e[22]!==H||e[23]!==W||e[24]!==J?(_=(0,n.jsx)(Ge,{children:(0,n.jsx)(Jt.T,{description:H,onClickCodeNotReceived:W,onSubmitCode:k,onSuccess:M,successMessage:J})}),e[20]=k,e[21]=M,e[22]=H,e[23]=W,e[24]=J,e[25]=_):_=e[25],_}},verifyLinkAccountCodeNotReceived:{title:p=>{let{intl:e}=p;return e.formatMessage({id:"auth.code-not-received.title"})},titleVisibility:"onScroll",screen:p=>{const e=(0,O.c)(16),{authState:i,navigation:g,onChangeAuthState:m,onContactSupport:u,onSendLinkAccountVerificationCode:d}=p;let L;e[0]!==i||e[1]!==g||e[2]!==m||e[3]!==d?(L=async()=>{const{authToken:R,linkId:j}=i;if(j===void 0||R===void 0)throw Error("linkId or authToken missing");if(R.method==="email")throw Error("invalid auth method");const D=await d({method:R.method,linkId:j});return D.fold(()=>{m({...i,verificationCodeCooldownUntilSms:{time:Date.now()+xt}}),g.goBack()},fs),D},e[0]=i,e[1]=g,e[2]=m,e[3]=d,e[4]=L):L=e[4];const S=L,f=i.verificationCodeCooldownUntilSms?.time??0,w=Date.now(),A=f!==void 0&&f>w?(f-w)/1e3:void 0;let h;e[5]!==A?(h={time:A},e[5]=A,e[6]=h):h=e[6];let c,k;e[7]===Symbol.for("react.memo_cache_sentinel")?(c={},k=[],e[7]=c,e[8]=k):(c=e[7],k=e[8]);let N;e[9]!==m?(N=()=>m(hs),e[9]=m,e[10]=N):N=e[10];let M;return e[11]!==S||e[12]!==u||e[13]!==h||e[14]!==N?(M=(0,n.jsx)(Ge,{children:(0,n.jsx)(Kt.s,{onContactSupport:u,onSendAgain:S,smsSendAgainCooldownSeconds:h,whatsappSendAgainCooldownSeconds:c,verificationMethods:k,onCountdownDone:N})}),e[11]=S,e[12]=u,e[13]=h,e[14]=N,e[15]=M):M=e[15],M}},verifyPhoneNumber:{isGoBackDisabled:!0,title:p=>{let{intl:e}=p;return e.formatMessage({id:"auth.verify-code.title"})},titleVisibility:"onScroll",screen:p=>{const e=(0,O.c)(32),{authState:i,intl:g,isVisible:m,navigation:u,onVerifyPhoneNumber:d,geoIpCountryCode3:L,onChangeAuthState:S,onClose:f}=p,{formatMessage:w}=g,A=V();let h;e[0]!==A?(h={country:A},e[0]=A,e[1]=h):h=e[1];const c=y(h);let k;e[2]!==i.isNewUserAccount||e[3]!==u?(k=()=>{te.Ep.enterVerificationCodeInteractionCodeNotReceived({isNewUserAccount:i.isNewUserAccount??!1,isUnverifiedEmailFlow:!1}),u.goTo("verifyPhoneNumberCodeNotReceived")},e[2]=i.isNewUserAccount,e[3]=u,e[4]=k):k=e[4];const N=k;let M;e[5]!==i.isNewUserAccount||e[6]!==d?(M=async fe=>await d({code:fe,isNewUserAccount:i.isNewUserAccount??!1}),e[5]=i.isNewUserAccount,e[6]=d,e[7]=M):M=e[7];const R=M;let j,D;e[8]!==i.country||e[9]!==L?(j=()=>{te.Ep.enterPhoneNumberInteractionSendCode({detectedCountry:L??null,isNewUserAccount:!0,isUnverifiedEmailFlow:!1,selectedCountry:i.country??null})},D=[i.country,L],e[8]=i.country,e[9]=L,e[10]=j,e[11]=D):(j=e[10],D=e[11]),(0,b.useEffect)(j,D);let H;e[12]!==c||e[13]!==u||e[14]!==S||e[15]!==f?(H=()=>{if(S(ps),c&&c.length>0)return u.goTo("marketingConsents");f?.()},e[12]=c,e[13]=u,e[14]=S,e[15]=f,e[16]=H):H=e[16];const W=H;let J;e[17]!==i.isNewUserAccount||e[18]!==i.phoneNumberVerificationMethod||e[19]!==m?(J=m?{name:"enterVerificationCodeView",properties:{source:null,isNewUserAccount:i.isNewUserAccount??!1,isUnverifiedEmailFlow:!1,isWhatsappRequested:i.phoneNumberVerificationMethod==="whatsapp"}}:void 0,e[17]=i.isNewUserAccount,e[18]=i.phoneNumberVerificationMethod,e[19]=m,e[20]=J):J=e[20],(0,dt.B)(J);let _;e[21]!==i.phoneNumber||e[22]!==w?(_=w({id:"auth.verify-number.description"},{phoneNumber:i.phoneNumber??""}),e[21]=i.phoneNumber,e[22]=w,e[23]=_):_=e[23];let Q;e[24]!==w?(Q=w({id:"auth.verify-code.success-phone"}),e[24]=w,e[25]=Q):Q=e[25];let ne;return e[26]!==N||e[27]!==R||e[28]!==W||e[29]!==_||e[30]!==Q?(ne=(0,n.jsx)(Ge,{children:(0,n.jsx)(Jt.T,{description:_,onClickCodeNotReceived:N,onSubmitCode:R,onSuccess:W,successMessage:Q})}),e[26]=N,e[27]=R,e[28]=W,e[29]=_,e[30]=Q,e[31]=ne):ne=e[31],ne}},verifyPhoneNumberCodeNotReceived:{isGoBackDisabled:!0,title:p=>{let{intl:e}=p;return e.formatMessage({id:"auth.code-not-received.title"})},titleVisibility:"onScroll",screen:p=>{const e=(0,O.c)(38),{authState:i,isVisible:g,navigation:m,onChangeAuthState:u,onContactSupport:d,onResendPhoneNumberVerificationCode:L,phoneNumberVerificationMethodConfig:S,intl:f}=p,w=(0,Tt.yl)(),{formatMessage:A}=f;let h;e[0]!==m?(h=()=>{m.goTo("changePhoneNumber")},e[0]=m,e[1]=h):h=e[1];const c=h;let k;e[2]!==w||e[3]!==d?(k=()=>{d(),w({type:"phoneNumberVerificationContactSupport"})},e[2]=w,e[3]=d,e[4]=k):k=e[4];const N=k;let M;e[5]!==i||e[6]!==A||e[7]!==c||e[8]!==m||e[9]!==u||e[10]!==L?(M=async pe=>{if(pe==="sms"&&te.Ep.codeNotReceivedInteractionSmsCode(),pe==="whatsapp"&&te.Ep.codeNotReceivedInteractionWhatsappCode(),i.phoneNumber===void 0){const ge={type:"phone_number_missing",message:A({id:"auth.change-phone-number.error-invalid-phone-number"})};return u(P=>({...P,method:pe,phoneVerificationError:ge})),c(),K.H.of(ge)}const Ae=pe??i.phoneNumberVerificationMethod??"sms",xe=await L({method:Ae});return xe.fold(()=>{const ge=Date.now()+xt;u(Ae==="sms"?{...i,verificationCodeCooldownUntilSms:{time:ge},phoneVerificationError:void 0}:{...i,verificationCodeCooldownUntilWhatsapp:{time:ge},phoneVerificationError:void 0}),m.goBack()},ge=>{const P=Date.now()+xt,oe=Date.now()+bn;e:switch(ge?.type){case"rate_limit_hit":{u(Y=>({...Y,method:pe,phoneVerificationError:ge,verificationCodeCooldownUntilWhatsapp:{time:oe},verificationCodeCooldownUntilSms:{time:oe}}));break e}default:u(Ae==="sms"?{...i,phoneVerificationError:ge,verificationCodeCooldownUntilSms:{time:P}}:{...i,phoneVerificationError:ge,verificationCodeCooldownUntilWhatsapp:{time:P}})}}),xe},e[5]=i,e[6]=A,e[7]=c,e[8]=m,e[9]=u,e[10]=L,e[11]=M):M=e[11];const R=M,j=Date.now();let D;e[12]===Symbol.for("react.memo_cache_sentinel")?(D=pe=>pe!==void 0&&pe>j?(pe-j)/1e3:void 0,e[12]=D):D=e[12];const H=D,W=i.verificationCodeCooldownUntilSms?.time;let J;e[13]!==W?(J=H(W),e[13]=W,e[14]=J):J=e[14];const _=J,Q=i.verificationCodeCooldownUntilWhatsapp?.time;let ne;e[15]!==Q?(ne=H(Q),e[15]=Q,e[16]=ne):ne=e[16];const fe=ne;let De,Te;e[17]!==i.phoneNumber||e[18]!==S?(Te=i.phoneNumber!==void 0?yn(i.phoneNumber,S):[],e[17]=i.phoneNumber,e[18]=S,e[19]=Te):Te=e[19],De=Te;const Ue=De;let Fe;e[20]!==i.phoneNumberVerificationMethod||e[21]!==g?(Fe=g?{name:"codeNotReceivedView",properties:{isWhatsappAvailable:i.phoneNumberVerificationMethod==="whatsapp"}}:void 0,e[20]=i.phoneNumberVerificationMethod,e[21]=g,e[22]=Fe):Fe=e[22],(0,dt.B)(Fe);let Se;e[23]!==_?(Se={time:_},e[23]=_,e[24]=Se):Se=e[24];let he;e[25]!==fe?(he={time:fe},e[25]=fe,e[26]=he):he=e[26];const Ee=i.phoneVerificationError?.message;let we;e[27]!==u?(we=()=>u(gs),e[27]=u,e[28]=we):we=e[28];let ve;return e[29]!==c||e[30]!==N||e[31]!==R||e[32]!==Se||e[33]!==he||e[34]!==Ee||e[35]!==we||e[36]!==Ue?(ve=(0,n.jsx)(Ge,{children:(0,n.jsx)(Kt.s,{onChangePhoneNumber:c,onContactSupport:N,onSendAgain:R,smsSendAgainCooldownSeconds:Se,whatsappSendAgainCooldownSeconds:he,verificationMethods:Ue,phoneVerificationError:Ee,onCountdownDone:we})}),e[29]=c,e[30]=N,e[31]=R,e[32]=Se,e[33]=he,e[34]=Ee,e[35]=we,e[36]=Ue,e[37]=ve):ve=e[37],ve}},changePhoneNumber:{title:p=>{let{intl:e}=p;return e.formatMessage({id:"auth.change-phone-number.title"})},titleVisibility:"onScroll",screen:p=>{const e=(0,O.c)(9),{authState:i,onChangeAuthState:g,onChangePhoneNumber:m,navigation:u}=p,{phoneNumber:d,phoneVerificationError:L}=i,[S,f]=(0,b.useState)(!1),[w,A]=(0,b.useState)();let h;e[0]!==u||e[1]!==g||e[2]!==m?(h=async R=>{g(Cs),A(void 0),f(!0),(await m({newPhoneNumber:R})).fold(()=>{g({phoneNumber:R,phoneVerificationError:void 0}),u.goBack()},D=>{A(D.message),f(!1)})},e[0]=u,e[1]=g,e[2]=m,e[3]=h):h=e[3];const c=h,k=w??L?.message,N=d!==void 0?d:null;let M;return e[4]!==c||e[5]!==S||e[6]!==k||e[7]!==N?(M=(0,n.jsx)(Ge,{children:(0,n.jsx)(eo,{errorMessage:k,initialPhoneNumber:N,isLoading:S,onSubmit:c})}),e[4]=c,e[5]=S,e[6]=k,e[7]=N,e[8]=M):M=e[8],M}},skipEmailVerificationVerifyEmail:{title:p=>{let{intl:e}=p;return e.formatMessage({id:"auth.verify-code.title"})},titleVisibility:"onScroll",screen:p=>{const e=(0,O.c)(24),{authState:i,intl:g,isVisible:m,navigation:u,onClose:d,onSkipEmailVerificationVerifyEmail:L,geoIpCountryCode3:S}=p,{formatMessage:f}=g;let w;e[0]!==u?(w=()=>{te.Ep.enterVerificationCodeInteractionCodeNotReceived({isNewUserAccount:!1,isUnverifiedEmailFlow:!0}),u.goTo("skipEmailVerificationVerifyEmailCodeNotReceived")},e[0]=u,e[1]=w):w=e[1];const A=w;let h;e[2]!==i.authToken||e[3]!==L?(h=async J=>{if(!i.authToken)throw new Error("authToken missing in handleOnSubmitCode");return L({code:J,authToken:i.authToken})},e[2]=i.authToken,e[3]=L,e[4]=h):h=e[4];const c=h;let k;e[5]!==d?(k=()=>{te.Ep.enterVerificationCodeDataPhoneVerified({isNewUserAccount:!1,isEmailVerified:!1,isUnverifiedEmailFlow:!0}),d?.()},e[5]=d,e[6]=k):k=e[6];const N=k;let M,R;e[7]!==i.country||e[8]!==S?(M=()=>{te.Ep.enterPhoneNumberInteractionSendCode({detectedCountry:S??null,isNewUserAccount:!1,isUnverifiedEmailFlow:!0,selectedCountry:i.country??null})},R=[i.country,S],e[7]=i.country,e[8]=S,e[9]=M,e[10]=R):(M=e[9],R=e[10]),(0,b.useEffect)(M,R);let j;e[11]!==i.phoneNumberVerificationMethod||e[12]!==m?(j=m?{name:"enterVerificationCodeView",properties:{source:null,isNewUserAccount:!1,isUnverifiedEmailFlow:!0,isWhatsappRequested:i.phoneNumberVerificationMethod==="whatsapp"}}:void 0,e[11]=i.phoneNumberVerificationMethod,e[12]=m,e[13]=j):j=e[13],(0,dt.B)(j);let D;e[14]!==f?(D=f({id:"auth.verify-email.description"}),e[14]=f,e[15]=D):D=e[15];let H;e[16]!==f?(H=f({id:"auth.verify-email.success-email"}),e[16]=f,e[17]=H):H=e[17];let W;return e[18]!==A||e[19]!==c||e[20]!==N||e[21]!==D||e[22]!==H?(W=(0,n.jsx)(Ge,{children:(0,n.jsx)(Jt.T,{description:D,hideLottie:!0,onClickCodeNotReceived:A,onSubmitCode:c,onSuccess:N,successMessage:H})}),e[18]=A,e[19]=c,e[20]=N,e[21]=D,e[22]=H,e[23]=W):W=e[23],W}},skipEmailVerificationVerifyEmailCodeNotReceived:{title:p=>{let{intl:e}=p;return e.formatMessage({id:"auth.code-not-received.title"})},titleVisibility:"onScroll",screen:p=>{const e=(0,O.c)(19),{authState:i,navigation:g,onChangeAuthState:m,onContactSupport:u,onSkipEmailVerificationResendEmailVerificationSms:d}=p,L=(0,Tt.yl)();let S;e[0]!==L||e[1]!==u?(S=()=>{u(),L({type:"phoneNumberVerificationContactSupport"})},e[0]=L,e[1]=u,e[2]=S):S=e[2];const f=S;let w;e[3]!==i||e[4]!==g||e[5]!==m||e[6]!==d?(w=async()=>{if(i.authToken===void 0)throw Error("auth token missing");const H=await d(i.authToken);return H.fold(()=>{te.Ep.codeNotReceivedInteractionResendCode(),m({...i,verificationCodeCooldownUntilSms:{time:Date.now()+xt}}),g.goBack()},ys),H},e[3]=i,e[4]=g,e[5]=m,e[6]=d,e[7]=w):w=e[7];const A=w,h=i.verificationCodeCooldownUntilSms?.time??0,c=Date.now(),k=h!==void 0&&h>c?(h-c)/1e3:void 0;let N;e[8]!==k?(N={time:k},e[8]=k,e[9]=N):N=e[9];let M,R;e[10]===Symbol.for("react.memo_cache_sentinel")?(M={},R=[],e[10]=M,e[11]=R):(M=e[10],R=e[11]);let j;e[12]!==m?(j=()=>m(bs),e[12]=m,e[13]=j):j=e[13];let D;return e[14]!==f||e[15]!==A||e[16]!==N||e[17]!==j?(D=(0,n.jsx)(Ge,{children:(0,n.jsx)(Kt.s,{hideLottie:!0,onContactSupport:f,onSendAgain:A,smsSendAgainCooldownSeconds:N,whatsappSendAgainCooldownSeconds:M,verificationMethods:R,onCountdownDone:j})}),e[14]=f,e[15]=A,e[16]=N,e[17]=j,e[18]=D):D=e[18],D}},verifyPhoneNumberMethodSelect:{isGoBackDisabled:!0,title:p=>{let{intl:e}=p;return e.formatMessage({id:"auth.verify-method-select.title"})},titleVisibility:"onScroll",screen:p=>{const e=(0,O.c)(43),{authState:i,isVisible:g,navigation:m,onChangeAuthState:u,onResendPhoneNumberVerificationCode:d,phoneNumberVerificationMethodConfig:L,onPhoneVerificationDisplayed:S}=p,[f,w]=(0,b.useState)(!1),[A,h]=(0,b.useState)(null);let c,k;e[0]!==f||e[1]!==S?(c=()=>{f||S(),w(!0)},k=[f,S],e[0]=f,e[1]=S,e[2]=c,e[3]=k):(c=e[2],k=e[3]),(0,b.useEffect)(c,k);let N;e[4]!==i.isNewUserAccount||e[5]!==m||e[6]!==u||e[7]!==d?(N=async P=>{P==="sms"?te.Ep.chooseVerificationMethodInteractionSmsCode({isNewUserAccount:i.isNewUserAccount??!1}):te.Ep.chooseVerificationMethodInteractionWhatsappCode({isNewUserAccount:i.isNewUserAccount??!1}),h(P),u(Y=>({...Y,phoneNumberVerificationMethod:P,phoneVerificationError:void 0})),(await d({method:P})).fold(()=>{m.goTo("verifyPhoneNumber"),h(null)},Y=>{const ce=Date.now()+xt,ue=Date.now()+bn;e:switch(Y?.type){case"rate_limit_hit":{u(ke=>({...ke,method:P,phoneVerificationError:Y,verificationCodeCooldownUntilWhatsapp:{time:ue},verificationCodeCooldownUntilSms:{time:ue}}));break e}default:u(ke=>({...ke,...P==="sms"?{phoneVerificationError:Y,verificationCodeCooldownUntilSms:{time:ce}}:{phoneVerificationError:Y,verificationCodeCooldownUntilWhatsapp:{time:ce}}}))}h(null)})},e[4]=i.isNewUserAccount,e[5]=m,e[6]=u,e[7]=d,e[8]=N):N=e[8];const M=N,R=Date.now();let j;e[9]===Symbol.for("react.memo_cache_sentinel")?(j=P=>P!==void 0&&P>R?(P-R)/1e3:void 0,e[9]=j):j=e[9];const D=j,H=i.verificationCodeCooldownUntilSms?.time;let W;e[10]!==H?(W=D(H),e[10]=H,e[11]=W):W=e[11];const J=W,_=i.verificationCodeCooldownUntilWhatsapp?.time;let Q;e[12]!==_?(Q=D(_),e[12]=_,e[13]=Q):Q=e[13];const ne=Q;let fe;e[14]!==i.isNewUserAccount||e[15]!==g?(fe=g?{name:"chooseVerificationMethodView",properties:{isNewUserAccount:i.isNewUserAccount??!1}}:void 0,e[14]=i.isNewUserAccount,e[15]=g,e[16]=fe):fe=e[16],(0,dt.B)(fe);let De,Te;e[17]!==i.phoneNumber||e[18]!==L?(Te=i.phoneNumber!==void 0?yn(i.phoneNumber,L):[],e[17]=i.phoneNumber,e[18]=L,e[19]=Te):Te=e[19],De=Te;const Ue=De;if(i.phoneNumber===void 0)return null;const Fe=A==="sms",Se=A==="whatsapp";let he,Ee;e[20]!==M?(he=()=>M("sms"),Ee=()=>M("whatsapp"),e[20]=M,e[21]=he,e[22]=Ee):(he=e[21],Ee=e[22]);const we=i?.phoneVerificationError?.message;let ve;e[23]!==J?(ve={time:J},e[23]=J,e[24]=ve):ve=e[24];let pe;e[25]!==ne?(pe={time:ne},e[25]=ne,e[26]=pe):pe=e[26];let Ae;e[27]!==m?(Ae=()=>m.goTo("changePhoneNumber"),e[27]=m,e[28]=Ae):Ae=e[28];let xe;e[29]!==u?(xe=()=>{u(Ss)},e[29]=u,e[30]=xe):xe=e[30];let ge;return e[31]!==i.phoneNumber||e[32]!==Fe||e[33]!==Se||e[34]!==he||e[35]!==Ee||e[36]!==we||e[37]!==ve||e[38]!==pe||e[39]!==Ae||e[40]!==xe||e[41]!==Ue?(ge=(0,n.jsx)(Ge,{children:(0,n.jsx)(Qi,{verificationMethods:Ue,isSendingSms:Fe,isSendingWhatsapp:Se,onSendBySms:he,onSendByWhatsApp:Ee,phoneNumber:i.phoneNumber,submitError:we,smsSendAgainCooldownSeconds:ve,whatsappSendAgainCooldownSeconds:pe,onChangePhoneNumber:Ae,onCountdownDone:xe})}),e[31]=i.phoneNumber,e[32]=Fe,e[33]=Se,e[34]=he,e[35]=Ee,e[36]=we,e[37]=ve,e[38]=pe,e[39]=Ae,e[40]=xe,e[41]=Ue,e[42]=ge):ge=e[42],ge}}});return p=>{const e=(0,O.c)(52),{authMethods:i,countries:g,flow:m,initialCountryData:u,initialState:d,isModalOpen:L,onAppleLogin:S,onClose:f,onChangePhoneNumber:w,onCheckIfLinkableExistingAccount:A,onContactSupport:h,onFacebookLogin:c,onGoogleLogin:k,onLineLogin:N,onEmagLogin:M,onModifyUserConsents:R,onSendLinkAccountVerificationCode:j,onResendPhoneNumberVerificationCode:D,onSendMagicEmail:H,onSkipEmailVerificationResendEmailVerificationSms:W,onSignup:J,onSkipEmailVerificationVerifyEmail:_,onVerifyLinkAccount:Q,onVerifyPhoneNumber:ne,privacyPolicyUrl:fe,referralCode:De,shouldDisableBackdropClose:Te,termsUrl:Ue,prompt:Fe,hideSubtitle:Se,customSubtitle:he,showWoltLogo:Ee,geoIpCountryCode3:we,fastAccountLinkingEnabled:ve,onFastAccountLinkingExposure:pe,methodSelectVariant:Ae,onMethodSelectRenewalExposure:xe,phoneNumberVerificationMethodConfig:ge,onMigrateAccount:P,onPhoneVerificationDisplayed:oe}=p,Y=(0,Z.tz)();let ce;e[0]===Symbol.for("react.memo_cache_sentinel")?(ce={},e[0]=ce):ce=e[0];const[ue,ke]=(0,b.useState)(ce);let Ve,qe;e[1]!==d?(Ve=()=>{d!==void 0&&(d.screen==="verifyPhoneNumber"||d.screen==="verifyPhoneNumberMethodSelect"?ke({phoneNumber:d.phoneNumber}):(d.screen==="createAccount"||d.screen==="linkAccount"||d.screen==="skipEmailVerificationVerifyEmail"||d.screen==="migrateAccount"||d.screen==="marketingConsents")&&ke(d.state))},qe=[d],e[1]=d,e[2]=Ve,e[3]=qe):(Ve=e[2],qe=e[3]),(0,b.useEffect)(Ve,qe);const ot=!Te;let mt;e[4]===Symbol.for("react.memo_cache_sentinel")?(mt={desktop:{maxWidth:500,maxHeight:800,modalType:"centered",animationStyle:"default"}},e[4]=mt):mt=e[4];const Ne=d?.screen,me=d?.screen==="index"?d.initialSocialLoginError:void 0;let Le;e[5]!==i||e[6]!==ue||e[7]!==g||e[8]!==he||e[9]!==ve||e[10]!==m||e[11]!==we||e[12]!==Se||e[13]!==u||e[14]!==Y||e[15]!==Ae||e[16]!==S||e[17]!==w||e[18]!==A||e[19]!==f||e[20]!==h||e[21]!==M||e[22]!==c||e[23]!==pe||e[24]!==k||e[25]!==N||e[26]!==xe||e[27]!==P||e[28]!==R||e[29]!==oe||e[30]!==D||e[31]!==j||e[32]!==H||e[33]!==J||e[34]!==W||e[35]!==_||e[36]!==Q||e[37]!==ne||e[38]!==ge||e[39]!==fe||e[40]!==Fe||e[41]!==De||e[42]!==Ee||e[43]!==Ne||e[44]!==me||e[45]!==Ue?(Le=(0,n.jsx)(be,{authMethods:i,authState:ue,autoResize:!0,countries:g,flow:m,initialScreen:Ne,initialSocialLoginError:me,initialCountryData:u,intl:Y,onAppleLogin:S,onChangeAuthState:ke,onChangePhoneNumber:w,onCheckIfLinkableExistingAccount:A,onClose:f,onContactSupport:h,onFacebookLogin:c,onGoogleLogin:k,onLineLogin:N,onEmagLogin:M,onModifyUserConsents:R,onSendMagicEmail:H,onSignup:J,onSkipEmailVerificationResendEmailVerificationSms:W,onSendLinkAccountVerificationCode:j,onResendPhoneNumberVerificationCode:D,onSkipEmailVerificationVerifyEmail:_,onVerifyLinkAccount:Q,onVerifyPhoneNumber:ne,privacyPolicyUrl:fe,referralCode:De,termsUrl:Ue,prompt:Fe,hideSubtitle:Se,customSubtitle:he,showWoltLogo:Ee,geoIpCountryCode3:we,fastAccountLinkingEnabled:ve,onFastAccountLinkingExposure:pe,methodSelectVariant:Ae,onMethodSelectRenewalExposure:xe,phoneNumberVerificationMethodConfig:ge,onMigrateAccount:P,onPhoneVerificationDisplayed:oe}),e[5]=i,e[6]=ue,e[7]=g,e[8]=he,e[9]=ve,e[10]=m,e[11]=we,e[12]=Se,e[13]=u,e[14]=Y,e[15]=Ae,e[16]=S,e[17]=w,e[18]=A,e[19]=f,e[20]=h,e[21]=M,e[22]=c,e[23]=pe,e[24]=k,e[25]=N,e[26]=xe,e[27]=P,e[28]=R,e[29]=oe,e[30]=D,e[31]=j,e[32]=H,e[33]=J,e[34]=W,e[35]=_,e[36]=Q,e[37]=ne,e[38]=ge,e[39]=fe,e[40]=Fe,e[41]=De,e[42]=Ee,e[43]=Ne,e[44]=me,e[45]=Ue,e[46]=Le):Le=e[46];let Me;return e[47]!==L||e[48]!==f||e[49]!==ot||e[50]!==Le?(Me=(0,n.jsx)(I,{show:L,onRequestClose:f,shouldCloseOnBackdropClick:ot,responsivenessConfigs:mt,children:Le}),e[47]=L,e[48]=f,e[49]=ot,e[50]=Le,e[51]=Me):Me=e[51],Me}};s(30982);function us(){}function ms(){}function fs(){}function hs(o){return{...o,phoneVerificationError:void 0,verificationCodeCooldownUntilWhatsapp:{time:0},verificationCodeCooldownUntilSms:{time:0}}}function ps(o){return{...o,phoneNumberVerified:!0}}function gs(o){return{...o,phoneVerificationError:void 0,verificationCodeCooldownUntilWhatsapp:{time:0},verificationCodeCooldownUntilSms:{time:0}}}function Cs(o){return{...o,phoneVerificationError:void 0}}function ys(){}function bs(o){return{...o,phoneVerificationError:void 0,verificationCodeCooldownUntilWhatsapp:{time:0},verificationCodeCooldownUntilSms:{time:0}}}function Ss(o){return{...o,phoneVerificationError:void 0,verificationCodeCooldownUntilWhatsapp:{time:0},verificationCodeCooldownUntilSms:{time:0}}}var Rt=s(68125),vs=s(82972),As=s(88012),ks=s(22065);const Es=()=>{const{user:o}=(0,Ie.hD)();return o?.country};var ws=s(55361);const vn=T.keyof({sms:null,whatsapp:null}),Ns=T.type({country_codes:T.record(T.string,T.array(vn)),default:T.array(vn)}),Ls=()=>(0,At.A)(Ns,ct.f8.get("/v1/wauth2/consumer-sms/verification-delivery-methods"),{reportErrors:!0}),Ms=1e3*60*60,Is=o=>{const t=(0,O.c)(5);let a;t[0]!==o?(a=o===void 0?{}:o,t[0]=o,t[1]=a):a=t[1];const r=a;let l;t[2]===Symbol.for("react.memo_cache_sentinel")?(l=["verification-delivery-methods-config"],t[2]=l):l=t[2];let C;return t[3]!==r?(C={queryKey:l,queryFn:xs,refetchOnMount:!1,refetchOnWindowFocus:!1,staleTime:Ms,...r},t[3]=r,t[4]=C):C=t[4],(0,ws.I)(C)};async function xs(){return(await Ls()).data}const Vs=`${$e._K.WOLT_AUTH_ENDPOINT_ABSOLUTE}/v1/wauth2/consumer-google?audience=${$e._K.WOLT_AUTH_AUDIENCE??"wolt-com"}`,Ts=o=>o==="treatment"?"v2":o==="treatment-prominent-google"?"v2-prominent-google":"v1",Us=o=>`${$e._K.WOLT_AUTH_ENDPOINT}/v1/wauth2/linelogin?audience=${$e._K.WOLT_AUTH_AUDIENCE??"wolt-com"}&locale=${o}`,js=(o,t)=>`${$e._K.WOLT_AUTH_ENDPOINT_ABSOLUTE}/v1/wauth2/emag-login?audience=${$e._K.WOLT_AUTH_AUDIENCE??"wolt-com"}&country=${t}&locale=${o}`,Rs="FIN",Ps="FI",Qe=(o,t)=>{const a=t,r=a.response?.status??500,l=a.response?.data,C=l?.msg??l?.message??l?.error;return r===429?{message:o({id:"errors.general-rate-limit-error"}),type:"rate_limit_hit"}:r>=400&&r<500&&C!==void 0?{message:C,type:"bad_request"}:{message:o({id:"errors.generic-server"}),type:"internal_error"}},qt=o=>{if(!(0,Re.F0)(o))return{errorCode:null,title:null,msg:null};const t=T.partial({error_code:T.number,msg:T.string,title:T.string}).is(o.response?.data)?o.response.data:void 0;return{errorCode:t?.error_code??null,msg:t?.msg??null,title:t?.title??null}},Ds=()=>{const o=(0,O.c)(2),t=(0,Ke.K)();let a,r;return o[0]!==t?(r=t.map(Bs),o[0]=t,o[1]=r):r=o[1],a=r,a},Fs=()=>{const o=(0,O.c)(5),{login:t}=(0,Ie.BG)(),{user:a}=(0,Ie.hD)();let r;o[0]!==a?(r=(0,vt.OC)(a),o[0]=a,o[1]=r):r=o[1];const l=r;let C;return o[2]!==t||o[3]!==l?(C=I=>{const V=$e._K.WOLT_AUTH_AUDIENCE??"wolt-com",{method:v,value:E}=I;return v==="apple"?I.authCode===void 0?Promise.reject(new Error("No authCode found")):t({audience:V,grantType:"apple_authorization_code",authorizationCode:I.authCode,identityToken:E},{replace:l}):v==="email"?t({audience:V,grantType:"email_login",token:E},{replace:l}):v==="facebook"?t({audience:V,grantType:"facebook_token",facebookToken:E},{replace:l}):v==="google"?t({audience:V,grantType:"google_token",googleToken:E},{replace:l}):v==="line"?t({audience:V,grantType:"line_token",lineToken:E},{replace:l}):v==="emag"?t({audience:V,grantType:"emag_token",emagToken:E},{replace:l}):v==="user_creation_token"?t({audience:V,grantType:"user_creation_token",token:E},{replace:l}):((0,nt.d)(v),Promise.reject(new Error(`unknown method: ${v}`)))},o[2]=t,o[3]=l,o[4]=C):C=o[4],C},An=o=>{let{useAuthModalRedirectUri:t=Xe.f,useUserCountry:a=Es,useLocalStorageJsonDecoded:r=at.S0,...l}=o;const C=ds({useUserCountry:a,useLocalStorageJsonDecoded:r,...l});return I=>{let{getMagicEmailAttribution:V,overrideUseAuthModalState:v,handleSupport:E}=I;const{data:{countryCode2:U,countryCode3:$}}=(0,Je.MU)(),[le,z]=(v??vs.Yt)(),X=Fs(),re=(0,lt.S)(),{authMethods:q,email:F,flow:ee,initialState:ie,isModalOpen:ae,referralCode:G,userFlow:B,prompt:de,hideSubtitle:be,customSubtitle:We,emagGeniusAccessToken:p,showWoltLogo:e}=le,{formatMessage:i,locale:g}=(0,Z.tz)(),{data:m}=Is({enabled:ae}),u=(0,Ot.ut)("woltcom-auth-modal-disable-backdrop-close",ae)==="treatment",[d,L]=(0,b.useState)(!1),S=()=>L(!0),f=(0,Ot.ut)("woltcom-fast-account-linking",d)==="treatment",[w,A]=(0,b.useState)(!1),h=()=>A(!0),c=(0,Ot.ut)("woltcom-auth-method-select-renewal",w),k=Ts(c),[N]=t(),{setLanguagePreference:M}=(0,Ze.G)(),R=Ds(),j=(0,b.useMemo)(()=>({country:$??Rs,phoneNumberCountryCode:U??Ps}),[U,$]),D=(0,b.useCallback)(async P=>{let{authToken:oe,email:Y,method:ce,recaptchaResult:ue}=P;try{const{value:ke}=oe,Ve=await(0,nn.a)(ce,{apple:ce==="apple"?{identity_token:ke}:void 0,google_token:ce==="google"?ke:void 0,facebook_token:ce==="facebook"?ke:void 0,line_token:ce==="line"?ke:void 0,emag_token:ce==="emag"?ke:void 0,email:Y,phone_number:void 0});return K.w.of({status:"linkAccount",verifyRequired:Ve.data.requires_verification,linkId:Ve.data.new_login_method_identifier})}catch(ke){const Ve=ke,{errorCode:qe}=qt(Ve);if(qe===19){const ot=V();try{return await Wt({attribution:ot,email:Y,recaptchaResult:ue,ref:N,userFlow:B}),K.w.of({status:"magicLinkSent"})}catch{}}return Ve.response?.status===404?K.w.of({status:"noMatchingAccount"}):K.H.of(Qe(i,Ve))}},[i,V,N,B]),H=(0,b.useCallback)(()=>{z(P=>({...P,isModalOpen:!1}))},[z]),W=(0,b.useCallback)(()=>{z(P=>({...P,phoneVerificationAlreadyShownOnce:!0}))},[z]),J=(0,b.useCallback)(async P=>{try{return await(0,ye.N)(P.map(oe=>{let{id:Y,value:ce}=oe;return{consent_id:Y,value:ce}})),K.w.of("ok")}catch(oe){const Y=oe;return K.H.of(Qe(i,Y))}},[i]),_=(0,Tt.yl)(),Q=(0,b.useCallback)(P=>{P.success?(te.Ep.sessionUserAccountAccessed({isEmailVerified:!0,isNewUserAccount:!1,isUnverifiedEmailFlow:!1,loginMethod:"apple"}),_({type:"loginCompleted",payload:{method:"apple"}})):(te.Ep.loginErrorLoginResult({errorMessage:P.error,loginMethod:"apple"}),_({type:"loginFailed",payload:{error:P.error,errorCode:String(P.errorCode??0),method:"apple"}}))},[_]),ne=(0,b.useCallback)(P=>{P.success?(te.Ep.sessionUserAccountAccessed({isEmailVerified:!0,isNewUserAccount:!1,isUnverifiedEmailFlow:!1,loginMethod:"facebook"}),_({type:"loginCompleted",payload:{method:"facebook"}})):(te.Ep.loginErrorLoginResult({errorMessage:P.error,loginMethod:"facebook"}),_({type:"loginFailed",payload:{error:P.error,errorCode:String(P.errorCode??0),method:"facebook"}}))},[_]),fe=(0,b.useCallback)(()=>{window.location.href=Vs},[]),De=(0,b.useCallback)(()=>{window.location.href=Us(g)},[g]),Te=(0,b.useCallback)(async()=>{await M(g),window.location.href=js(g,(0,Rt.p)($))},[g,$,M]),Ue=(0,b.useCallback)(async P=>{let{linkId:oe,method:Y}=P;try{await Pn({linkId:oe,method:Y})}catch(ce){return K.H.of(Qe(i,ce))}return K.w.of("ok")},[i]),Fe=(0,b.useCallback)(async P=>{let{method:oe}=P;try{return await Tn({message_delivery_method:oe}),K.w.of("ok")}catch(Y){return K.H.of(Qe(i,Y))}},[i]),Se=(0,b.useCallback)(async P=>{let{newPhoneNumber:oe,method:Y}=P;try{return await Nn({phone_number:oe,message_delivery_method:Y}),K.w.of("ok")}catch(ce){return K.H.of(Qe(i,ce))}},[i]),he=(0,b.useCallback)(async P=>{let{email:oe,recaptchaResult:Y}=P;const ce=V();try{const ue=await Wt({attribution:ce,email:oe,recaptchaResult:Y,userFlow:B,ref:N});return K.w.of({status:"magicLinkSent",isNewUserAccount:ue.data.account_found??!1})}catch(ue){return K.H.of(Qe(i,ue))}},[V,B,i,N]),Ee=(0,b.useCallback)(async P=>{let{consents:oe,country:Y,firstName:ce,lastName:ue,phoneNumber:ke,recaptchaResult:Ve,referralCode:qe,method:ot,sendPhoneNumberVerification:mt,...Ne}=P;if(Ne.flow==="authToken"&&Ne.authToken.method!=="email"&&F!==void 0){const{method:me,value:Le}=Ne.authToken;try{const Me=await(0,nn.a)(me,{apple:me==="apple"?{identity_token:Le}:void 0,google_token:me==="google"?Le:void 0,facebook_token:me==="facebook"?Le:void 0,line_token:me==="line"?Le:void 0,emag_token:me==="emag"?Le:void 0,email:F,phone_number:ke});return K.w.of({status:"linkAccount",verifyRequired:Me.data.requires_verification,linkId:Me.data.new_login_method_identifier})}catch(Me){const He=Me,{errorCode:it}=qt(He);if(it===19){const pt=V();try{return await Wt({attribution:pt,email:F,recaptchaResult:Ve,ref:N,userFlow:B}),K.w.of({status:"magicLinkSent"})}catch{}}if(He.response?.status!==404)return K.H.of(Qe(i,He))}}try{const me=Ne.flow==="authToken"?Ne.authToken:void 0,Le=await xn({apple:me?.method==="apple"?{identity_token:me.value}:void 0,recaptchaResult:Ve,country:Y,consents:oe.map(it=>{let{id:pt,value:Vt}=it;return{consent_id:pt,value:Vt}}),credit_code:qe!==""?qe:void 0,email:Ne.flow==="smsToken"&&Ne.email||F,email_token:me?.method==="email"?me.value:void 0,facebook_token:me?.method==="facebook"?me.value:void 0,first_name:ce,google_token:me?.method==="google"?me.value:void 0,line_token:me?.method==="line"?me.value:void 0,emag_token:me?.method==="emag"?me.value:void 0,last_name:ue,phone_number:ke,sms_token:Ne.smsToken??void 0,message_delivery_method:ot,send_phone_number_verification:mt}),Me=me?.method??"email";_({type:"signupCompleted",payload:{method:Me}}),Ne.flow==="authToken"&&te.Ep.sessionEmailVerified({isNewUserAccount:!0,isUnverifiedEmailFlow:!1});const He=(Ne.flow==="smsToken"||me?.method==="email")&&"login_token"in Le.data&&Le.data.login_token!==void 0?{method:"user_creation_token",value:Le.data.login_token}:me;if(!He)throw new Error;return await X(He),te.Ep.sessionUserAccountAccessed({isEmailVerified:Ne.flow==="authToken",isNewUserAccount:!0,isUnverifiedEmailFlow:Ne.flow==="smsToken",loginMethod:Me}),Me==="emag"&&await(0,Bt.D)(p,(0,Rt.p)($)),_({type:"loginCompleted",payload:{method:Me}}),Ne.smsToken!==void 0?K.w.of({status:"accountCreated"}):K.w.of({isNewUserAccount:!0,status:"verifyPhoneNumber"})}catch(me){const Le=Ne.flow==="authToken"?Ne.authToken.method:"email",Me=me;_({type:"signupFailed",payload:{error:Me?.message,method:Le}});const{errorCode:He,msg:it,title:pt}=qt(me);return He===1021?K.w.of({bodyText:it,status:"phoneNumberInUse",titleText:pt}):(Ne.flow==="authToken"?te.Ep.signUpFormErrorSignupResult({errorMessage:it??Me?.message,loginMethod:Le,errorCode:(0,ft.R)(He)?String(He):void 0,isNewUserAccount:!0}):te.Ep.enterVerificationCodeErrorPhoneVerificationResult({errorCode:(0,ft.R)(He)?String(He):"0",errorMessage:it??Me?.message,isUnverifiedEmailFlow:!0,isNewUserAccount:!0}),K.H.of(Qe(i,me)))}},[_,F,i,V,X,B,N,p,$]),we=(0,b.useCallback)(async P=>{let{authToken:oe,code:Y,linkId:ce,method:ue}=P;try{return await Dn({code:Y,linkId:ce,method:ue}),await X(oe),oe.method==="emag"&&await(0,Bt.D)(p,(0,Rt.p)($)),te.Ep.sessionUserAccountAccessed({isEmailVerified:!0,isNewUserAccount:!1,isUnverifiedEmailFlow:!1,loginMethod:ue}),K.w.of("ok")}catch(ke){return K.H.of(Qe(i,ke))}},[i,X,p,$]),ve=(0,tt.tn)(),pe=(0,b.useCallback)(async P=>{let{code:oe,isNewUserAccount:Y}=P;try{return await Fn({sms_code:oe}),ve(),te.Ep.enterVerificationCodeDataPhoneVerified({isNewUserAccount:Y,isEmailVerified:!0,isUnverifiedEmailFlow:!1}),K.w.of("ok")}catch(ce){const ue=ce;return te.Ep.enterVerificationCodeErrorPhoneVerificationResult({errorCode:ue.response?.status!==void 0?String(ue.response.status):"0",errorMessage:Qe(i,ue)?.message,isUnverifiedEmailFlow:!1,isNewUserAccount:Y}),ue.response?.status===404?K.H.of({type:"invalid_verification_code",message:i({id:"auth.verify-code.invalid-code"})}):K.H.of(Qe(i,ue))}},[i,ve]),Ae=(0,b.useCallback)(async P=>{try{return await(0,Un.d)({emailToken:P.value}),K.w.of("ok")}catch(oe){return K.H.of(Qe(i,oe))}},[i]),xe=(0,b.useCallback)(async P=>{let{authToken:oe,marketingConsents:Y}=P;try{const ce=Y?.map(Ve=>({consent_id:Ve.id,value:Ve.value})),ue=await Mn({authToken:oe,marketingConsents:ce}),ke=oe.value&&oe.method==="emag"?oe:{method:"user_creation_token",value:ue?.data?.login_token};return await X(ke),te.Ep.sessionUserAccountAccessed({isEmailVerified:!1,isNewUserAccount:!1,isUnverifiedEmailFlow:!1,loginMethod:oe.method}),p!==null&&await(0,Bt.D)(p,(0,Rt.p)($)),K.w.of("ok")}catch(ce){return K.H.of(Qe(i,ce))}},[i,X,p,$]),ge=(0,b.useCallback)(async P=>{let{authToken:oe,code:Y}=P;try{return await jn({emailToken:oe.value,smsCode:Y}),await X(oe),te.Ep.sessionEmailVerified({isNewUserAccount:!1,isUnverifiedEmailFlow:!0}),te.Ep.sessionUserAccountAccessed({isEmailVerified:!0,isNewUserAccount:!1,isUnverifiedEmailFlow:!0,loginMethod:"email"}),K.w.of("ok")}catch(ce){const ue=ce;return te.Ep.enterVerificationCodeErrorPhoneVerificationResult({errorCode:ue.response?.status!==void 0?String(ue.response.status):"0",errorMessage:Qe(i,ue)?.message,isUnverifiedEmailFlow:!0,isNewUserAccount:!1}),K.H.of(Qe(i,ue))}},[i,X]);return(0,n.jsx)(C,{authMethods:q,countries:R,flow:ee,initialCountryData:j,initialState:ie,isModalOpen:ae,onAppleLogin:Q,onChangePhoneNumber:Se,onCheckIfLinkableExistingAccount:D,onClose:H,onContactSupport:E,onFacebookLogin:ne,onGoogleLogin:fe,onLineLogin:De,onEmagLogin:Te,onModifyUserConsents:J,onSendLinkAccountVerificationCode:Ue,onResendPhoneNumberVerificationCode:Fe,onSendMagicEmail:he,onSignup:Ee,onSkipEmailVerificationResendEmailVerificationSms:Ae,onSkipEmailVerificationVerifyEmail:ge,onVerifyLinkAccount:we,onVerifyPhoneNumber:pe,referralCode:G,privacyPolicyUrl:re.privacyPolicy,shouldDisableBackdropClose:u,termsUrl:re.terms,prompt:de,hideSubtitle:be,customSubtitle:We,showWoltLogo:!!e,geoIpCountryCode3:$,fastAccountLinkingEnabled:f,onFastAccountLinkingExposure:S,methodSelectVariant:k,onMethodSelectRenewalExposure:h,phoneNumberVerificationMethodConfig:m,onMigrateAccount:xe,onPhoneVerificationDisplayed:W})}},Os=An({createModalNavigationStack:rt.g,useCreateAccountConsents:As.W,useMarketingConsents:ks.b,Modal:et.a});function Bs(o){const{value:t,label:a}=o;return{code:t,label:a}}}}]);

//# sourceMappingURL=https://sourcemaps.internal.wolt.com/wolt-com/5431-2412dbce0709af0a837f.chunk.js.map